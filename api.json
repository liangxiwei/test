{"openapi":"3.0.0","info":{"title":"Next Space","version":"2.0.0"},"servers":[{"url":"https://dev.allflow.cn/api","description":"开发环境"},{"url":"https://allflow.cn/api","description":"线上环境"}],"paths":{"/phones/{phone}/check":{"parameters":[{"$ref":"#/components/parameters/phone"}],"patch":{"summary":"验证电话信息","tags":["infra"],"operationId":"Infra.checkPhone","security":[],"description":"验证电话号码，成功返回\n- 电话可用状态: 用于判断下步流程\n","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["status"],"properties":{"status":{"$ref":"#/components/schemas/PhoneCheckStatus"}}}}}]}]},"examples":{"无访问权限":{"$ref":"#/components/examples/NO_RIGHT"},"电话不可用":{"$ref":"#/components/examples/WRONG_PHONE"},"系统黑名单":{"$ref":"#/components/examples/BLACK_LIST"}}}}}}}},"/phones/{phone}/captchas":{"parameters":[{"$ref":"#/components/parameters/phone"}],"post":{"summary":"发送验证码","tags":["infra"],"operationId":"Infra.createPhoneCaptcha","description":"发送验证码，基于 type 区分用途\\\n支持 登录，注册，绑定新手机\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["type"],"properties":{"type":{"$ref":"#/components/schemas/CaptchaSendType"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]},"examples":{"发送成功":{"$ref":"#/components/examples/200|true"},"发送失败":{"value":{"code":200,"data":false}},"发送频繁":{"$ref":"#/components/examples/MSG_FREQUENT"}}}}}}}},"/phones/{phone}/tokens":{"parameters":[{"$ref":"#/components/parameters/phone"}],"post":{"summary":"新建访问令牌，用于用户登录","tags":["infra"],"operationId":"Infra.createPhoneToken","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["captcha"],"properties":{"captcha":{"description":"验证码 (6位数字)","type":"string"}}},"example":{"captcha":"111111"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"allOf":[{"$ref":"#/components/schemas/UserDTO"},{"type":"object","required":["complete"],"properties":{"complete":{"$ref":"#/components/schemas/CompleteStatus"}}}]}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]},"examples":{"验证码错误":{"$ref":"#/components/examples/WRONG_CODE"}}}}}}}},"/phones/{phone}/users":{"parameters":[{"$ref":"#/components/parameters/phone"}],"post":{"summary":"用户注册","tags":["infra"],"operationId":"Infra.createPhoneUser","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["captcha"],"properties":{"captcha":{"description":"验证码","type":"string"},"inviteCode":{"description":"邀请码","type":"string"},"promotionChannel":{"description":"推广渠道","type":"string"}}},"example":{"captcha":"111111","inviteCode":"NEXTR1"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"$ref":"#/components/schemas/UserDTO"}}}]}]},"examples":{"注册成功":{"$ref":"#/components/examples/200|userInfo"},"验证码错误":{"$ref":"#/components/examples/WRONG_CODE"},"邀请码无效":{"$ref":"#/components/examples/WRONG_INVITE"}}}}}}}},"/phones/oneclick":{"post":{"summary":"用户一键登录","tags":["infra"],"operationId":"Infra.createUserByOneclick","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["type"],"properties":{"type":{"$ref":"#/components/schemas/OneClickType"},"token":{"description":"token","type":"string"},"accessToken":{"description":"accessToken","type":"string"},"ver":{"description":"区分新旧版本，2为新版本，将返回 action 字段区分登录还是注册","type":"string"}}},"example":{"type":0,"token":"ec46a99a65e24be1bd2ba92dc9a5b575","accessToken":"7b0a202022616363657373546f6b656e22203a202261303464373139363436343062633035396437383062623639333361393262623165303934303539666364383431353033363536343034383539343337303537222c0a20202276657273696f6e22203a20227632220a7d","ver":"2"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","properties":{"user":{"$ref":"#/components/schemas/UserDTO"},"action":{"type":"string","enum":["login","register"]}}}}}]}]},"examples":{"登录成功":{"$ref":"#/components/examples/200|userInfo"},"登录失败":{"$ref":"#/components/examples/LOGIN_FAIL"},"第三方 TOKEN 无效":{"$ref":"#/components/examples/THIRD_PARTY_LOGIN_TOKEN_FAIL"}}}}}}}},"/phones/{phone}/password/reset":{"parameters":[{"$ref":"#/components/parameters/phone"}],"patch":{"summary":"通过手机验证码重置密码","tags":["infra"],"operationId":"Infra.resetUserPasswordByPhone","description":"通过手机验证码重置用户密码\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["captcha","password"],"properties":{"captcha":{"description":"验证码","type":"string"},"password":{"description":"密码","type":"string"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]},"examples":{"重置成功":{"$ref":"#/components/examples/200|true"},"验证码错误":{"$ref":"#/components/examples/WRONG_CODE"},"无权限访问":{"$ref":"#/components/examples/NO_RIGHT"}}}}}}}},"/phones/{phone}/publicData":{"parameters":[{"$ref":"#/components/parameters/phone"}],"get":{"summary":"获取用户公开信息","tags":["infra"],"operationId":"Infra.phonePublicData","description":"仅返回昵称/头像/创建时间\n","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["nickname","avatar","backgroundColor","createdAt"],"properties":{"nickname":{"description":"用户昵称","type":"string"},"avatar":{"description":"用户头像","type":"string"},"backgroundColor":{"description":"背景色","type":"string"},"createdAt":{"description":"用户创建时间","type":"string"}}}}}]}]},"examples":{"成功":{"$ref":"#/components/examples/200|true"},"请求未授权":{"$ref":"#/components/examples/UNAUTHORIZED"}}}}}}}},"/emails/check":{"patch":{"summary":"验证邮箱是否注册","tags":["infra"],"operationId":"Infra.checkEmail","security":[],"description":"验证邮箱是否注册，成功返回\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["email"],"properties":{"email":{"description":"邮箱","type":"string"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["status"],"properties":{"status":{"$ref":"#/components/schemas/PhoneCheckStatus"}}}}}]}]},"examples":{"无访问权限":{"$ref":"#/components/examples/NO_RIGHT"},"系统黑名单":{"$ref":"#/components/examples/BLACK_LIST"}}}}}}}},"/emails/captchas":{"post":{"summary":"发送邮箱验证码","tags":["infra"],"operationId":"Infra.emailCaptcha","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["email","type"],"properties":{"email":{"description":"邮箱","type":"string"},"type":{"$ref":"#/components/schemas/CaptchaSendType"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]},"examples":{"发送成功":{"$ref":"#/components/examples/200|true"},"请求未授权":{"$ref":"#/components/examples/UNAUTHORIZED"}}}}}}}},"/emails/verify":{"patch":{"deprecated":true,"summary":"验证邮箱验证码","tags":["infra"],"operationId":"Infra.emailVerify","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["email","captcha","type"],"properties":{"email":{"description":"邮箱","type":"string"},"captcha":{"description":"验证码","type":"string"},"type":{"$ref":"#/components/schemas/CaptchaSendType"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]},"examples":{"验证正确":{"$ref":"#/components/examples/200|true"}}}}}}}},"/emails/password/reset":{"patch":{"summary":"通过邮箱验证码重置密码","tags":["infra"],"operationId":"Infra.resetUserPasswordByEmail","description":"通过邮箱验证码重置用户密码\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["email","captcha","password"],"properties":{"email":{"description":"邮箱","type":"string"},"captcha":{"description":"验证码","type":"string"},"password":{"description":"密码","type":"string"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]},"examples":{"重置成功":{"$ref":"#/components/examples/200|true"},"验证码错误":{"$ref":"#/components/examples/WRONG_CODE"},"无权限访问":{"$ref":"#/components/examples/NO_RIGHT"}}}}}}}},"/users/me":{"get":{"summary":"获取用户信息","tags":["infra"],"operationId":"Infra.getMyUserInfo","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"$ref":"#/components/schemas/UserDTO"}}}]}]},"examples":{"获取成功":{"$ref":"#/components/examples/200|userInfo"}}}}}}}},"/users/{user}":{"parameters":[{"$ref":"#/components/parameters/user"}],"get":{"summary":"获取用户信息","tags":["infra"],"operationId":"Infra.getUser","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"$ref":"#/components/schemas/UserDTO"}}}]}]},"examples":{"获取成功":{"$ref":"#/components/examples/200|userInfo"}}}}}}},"put":{"summary":"更新用户信息","tags":["infra"],"operationId":"Infra.updateUser","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"nickname":{"description":"用户昵称","type":"string"},"occupation":{"description":"职业","type":"integer"},"avatar":{"description":"头像","type":"string"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"$ref":"#/components/schemas/UserDTO"}}}]}]},"examples":{"更新成功":{"$ref":"#/components/examples/200|userInfo"}}}}}}},"delete":{"summary":"注销用户","tags":["infra"],"operationId":"Infra.removeUser","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["captcha"],"properties":{"captcha":{"description":"验证码","type":"string"},"reasons":{"description":"注销原因","type":"array","items":{"type":"string"}},"otherReason":{"description":"其他原因","type":"string"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]}}}}}}},"/users/{user}/plans/config":{"parameters":[{"$ref":"#/components/parameters/user"}],"get":{"summary":"获取用户套餐配置","tags":["infra"],"operationId":"Infra.getUserPlanConfig","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","properties":{"freePersonal":{"$ref":"#/components/schemas/PlanConfigDTO"},"personal":{"$ref":"#/components/schemas/PlanConfigDTO"},"freeTeam":{"$ref":"#/components/schemas/PlanConfigDTO"}}}}}]}]}}}}}}},"/users/{user}/complete":{"parameters":[{"$ref":"#/components/parameters/user"}],"patch":{"summary":"完善用户信息","tags":["infra"],"operationId":"Infra.completeUser","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["nickname"],"properties":{"nickname":{"description":"用户昵称","type":"string"},"occupation":{"description":"职业","type":"integer"},"avatar":{"description":"头像","type":"string"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"$ref":"#/components/schemas/UserDTO"}}}]}]},"examples":{"更新成功":{"$ref":"#/components/examples/200|userInfo"}}}}}}}},"/users/{user}/logout":{"parameters":[{"$ref":"#/components/parameters/user"}],"patch":{"summary":"退出登录","tags":["infra"],"operationId":"Infra.logoutUser","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]},"examples":{"退出成功":{"$ref":"#/components/examples/200|true"}}}}}}}},"/users/signup":{"post":{"summary":"用户注册","tags":["infra"],"operationId":"Infra.usersRegister","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["type","phone","captcha","validate","password","inviteCode","authorizationCode","promotionChannel"],"properties":{"type":{"$ref":"#/components/schemas/UserAuthorizationType"},"phone":{"description":"手机号","type":"string"},"captcha":{"description":"验证码","type":"string"},"validate":{"description":"网易易盾二次校验数据","type":"string"},"promotionChannel":{"description":"用户注册渠道","type":"string"},"password":{"description":"密码, 如果注册类型为邮箱或者手机, 必填","type":"string"},"inviteCode":{"description":"邀请码","type":"string"},"authorizationCode":{"description":"授权码, 内部使用通过 authorization 接口获取","type":"string"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"allOf":[{"$ref":"#/components/schemas/UserDTO"}]}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]},"examples":{"参数无效":{"$ref":"#/components/examples/PARAMETER_INVALID"},"验证码错误":{"$ref":"#/components/examples/WRONG_CODE"},"邀请码错误":{"$ref":"#/components/examples/WRONG_INVITE"},"已注册":{"$ref":"#/components/examples/HAS_SINGUP"}}}}}}}},"/users/login/password":{"post":{"summary":"使用用户名密码登录","tags":["infra"],"operationId":"Infra.loginPassword","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["account","password"],"properties":{"account":{"description":"手机号或邮箱","type":"string"},"password":{"description":"密码","type":"string"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"allOf":[{"$ref":"#/components/schemas/UserDTO"},{"type":"object","required":["complete"],"properties":{"complete":{"$ref":"#/components/schemas/CompleteStatus"}}}]}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]},"examples":{"登录失败":{"$ref":"#/components/examples/LOGIN_FAIL"},"密码错误":{"$ref":"#/components/examples/WRONG_PASSWORD"}}}}}}}},"/users/login/captchas":{"post":{"summary":"使用验证码登录","tags":["infra"],"operationId":"Infra.loginCaptcha","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["account","captcha"],"properties":{"account":{"description":"手机号或邮箱","type":"string"},"captcha":{"description":"验证码","type":"string"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"allOf":[{"$ref":"#/components/schemas/UserDTO"},{"type":"object","required":["complete"],"properties":{"complete":{"$ref":"#/components/schemas/CompleteStatus"}}}]}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]},"examples":{"登录失败":{"$ref":"#/components/examples/LOGIN_FAIL"},"验证码错误":{"$ref":"#/components/examples/WRONG_CODE"}}}}}}}},"/users/login/authorization/code":{"post":{"summary":"使用第三方授权码登录","tags":["infra"],"operationId":"Infra.loginAuthorizationCode","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["type","code"],"properties":{"type":{"$ref":"#/components/schemas/UserAuthorizationType"},"code":{"description":"第三方授权码","type":"string"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"allOf":[{"$ref":"#/components/schemas/UserDTO"},{"type":"object","required":["complete"],"properties":{"complete":{"$ref":"#/components/schemas/CompleteStatus"}}}]}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]},"examples":{"登录失败":{"$ref":"#/components/examples/LOGIN_FAIL"}}}}}}}},"/users/login/wechat/qrcode":{"get":{"summary":"获取微信公众号扫码登录二维码","tags":["infra"],"operationId":"Infra.getUserLoginWechatQrcode","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","properties":{"uuid":{"type":"string","description":"授权信息存储 ID, 通过 `/users/authorization/wechat/scan` 获取用户登录信息"},"url":{"type":"string","description":"二维码字符串"},"qr":{"type":"string","description":"二维码图片地址"}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/users/{user}/password":{"parameters":[{"$ref":"#/components/parameters/user"}],"patch":{"summary":"重置密码","tags":["infra"],"operationId":"Infra.resetUserPassword","description":"通过老密码, 重置用户密码\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["old","new"],"properties":{"old":{"description":"旧密码","type":"string"},"new":{"description":"新密码","type":"string"}}},"example":{"old":"XXXXXXX","new":"XXXXXXX"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]},"examples":{"更新成功":{"$ref":"#/components/examples/200|true"},"无权限访问":{"$ref":"#/components/examples/NO_RIGHT"}}}}}}}},"/users/{user}/phone":{"parameters":[{"$ref":"#/components/parameters/user"}],"patch":{"summary":"更换新手机","tags":["infra"],"operationId":"Infra.updateUserPhone","description":"创建新手机，签发新访问令牌\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["phone"],"properties":{"phone":{"description":"新手机","type":"string"}}},"example":{"phone":"15043339444"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]},"examples":{"更换成功":{"$ref":"#/components/examples/200|true"}}}}}}}},"/users/{user}/bindEmail":{"parameters":[{"$ref":"#/components/parameters/user"}],"post":{"deprecated":true,"summary":"绑定邮箱","tags":["infra"],"operationId":"Infra.bindUserEmail","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["email","captcha"],"properties":{"email":{"description":"邮箱","type":"string"},"captcha":{"description":"验证码","type":"string"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]},"examples":{"绑定成功":{"$ref":"#/components/examples/200|true"}}}}}}}},"/users/{user}/bindAuthorizationCode":{"parameters":[{"$ref":"#/components/parameters/user"}],"post":{"summary":"绑定第三方账号","tags":["infra"],"operationId":"Infra.bindThirdAccount","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["type","code"],"properties":{"type":{"$ref":"#/components/schemas/UserAuthorizationType"},"code":{"description":"授权码, 内部使用通过 authorization 接口获取","type":"string"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]},"examples":{"绑定成功":{"$ref":"#/components/examples/200|true"}}}}}}}},"/users/{user}/changeBindPhone":{"parameters":[{"$ref":"#/components/parameters/user"}],"post":{"summary":"换绑手机号","tags":["infra"],"operationId":"Infra.changeBindPhone","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["phone","captcha","type","code"],"properties":{"phone":{"description":"手机号","type":"string"},"captcha":{"description":"验证码","type":"string"},"type":{"$ref":"#/components/schemas/UserAuthorizationType"},"code":{"description":"授权码, 内部使用通过 authorization 接口获取","type":"string"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]},"examples":{"换绑成功":{"$ref":"#/components/examples/200|true"}}}}}}}},"/users/{user}/unbind":{"parameters":[{"$ref":"#/components/parameters/user"}],"patch":{"summary":"解绑账户信息","description":"解绑账户信息, 手机号不能解绑\n","tags":["infra"],"operationId":"Infra.unbindAccount","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["type"],"properties":{"type":{"$ref":"#/components/schemas/UserAuthorizationType"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]},"examples":{"解绑成功":{"$ref":"#/components/examples/200|true"}}}}}}}},"/users/authorization/email":{"post":{"summary":"获取 Email 授权","tags":["infra"],"operationId":"Infra.emailAuthorization","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["email","captcha","type"],"properties":{"email":{"description":"邮箱","type":"string"},"captcha":{"description":"验证码","type":"string"},"type":{"$ref":"#/components/schemas/CaptchaSendType"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"$ref":"#/components/schemas/AuthorizationCodeDTO"}}}]}]},"examples":{"授权成功":{"$ref":"#/components/examples/200|true"},"验证码错误":{"$ref":"#/components/examples/WRONG_CODE"}}}}}}}},"/users/authorization/apple":{"post":{"summary":"获取 Apple 授权","tags":["infra"],"operationId":"Infra.appleAuthorization","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["code","idToken","user"],"properties":{"code":{"description":"Apple code","type":"string"},"idToken":{"description":"Apple idToken","type":"string"},"user":{"description":"用户信息","type":"object","properties":{"email":{"description":"用户邮箱","type":"string"},"firstName":{"type":"string"},"lastName":{"type":"string"}}}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"$ref":"#/components/schemas/AuthorizationCodeDTO"}}}]}]},"examples":{"授权成功":{"$ref":"#/components/examples/200|true"},"苹果授权失败":{"$ref":"#/components/examples/APPLE_AUTH_FAIL"}}}}}}}},"/users/authorization/wechat":{"post":{"summary":"获取微信授权","tags":["infra"],"operationId":"Infra.wechatAuthorization","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["code","type"],"properties":{"code":{"description":"微信授权码","type":"string"},"type":{"description":"客户端请求类型, 移动端: mobile, web端: web, H5: h5","type":"string","enum":["mobile","web","h5"]}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"$ref":"#/components/schemas/AuthorizationCodeDTO"}}}]}]},"examples":{"授权成功":{"$ref":"#/components/examples/200|true"},"微信授权失败":{"$ref":"#/components/examples/WECHAT_AUTH_FAIL"}}}}}}}},"/users/authorization/wechat/scan":{"post":{"summary":"获取微信公众号扫码授权","tags":["infra"],"operationId":"Infra.wechatAuthorizationScan","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["uuid"],"properties":{"uuid":{"description":"授权信息存储 ID","type":"string"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"$ref":"#/components/schemas/AuthorizationCodeDTO"}}}]}]},"examples":{"授权成功":{"$ref":"#/components/examples/200|true"},"微信授权失败":{"$ref":"#/components/examples/WECHAT_AUTH_FAIL"}}}}}}}},"/users/authorization/qq":{"post":{"summary":"获取 QQ 授权","tags":["infra"],"operationId":"Infra.qqAuthorization","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["accessToken"],"properties":{"accessToken":{"description":"QQ授权TOKEN","type":"string"},"type":{"description":"客户端请求类型, 移动端: mobile, web端: web","type":"string","enum":["mobile","web"]}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"$ref":"#/components/schemas/AuthorizationCodeDTO"}}}]}]},"examples":{"授权成功":{"$ref":"#/components/examples/200|true"},"QQ授权失败":{"$ref":"#/components/examples/QQ_AUTH_FAIL"}}}}}}}},"/users/authorization/phone":{"post":{"summary":"获取手机号授权, 目前适用于换绑手机号","tags":["infra"],"operationId":"Infra.phoneAuthorization","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["phone","captcha","type"],"properties":{"phone":{"description":"手机号","type":"string"},"captcha":{"description":"验证码","type":"string"},"type":{"$ref":"#/components/schemas/CaptchaSendType"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"$ref":"#/components/schemas/AuthorizationCodeDTO"}}}]}]},"examples":{"授权成功":{"$ref":"#/components/examples/200|true"},"验证码错误":{"$ref":"#/components/examples/WRONG_CODE"}}}}}}}},"/users/authorization/password":{"post":{"summary":"使用用户ID和密码获取授权, 目前适用于换绑手机号","tags":["infra"],"operationId":"Infra.passwordAuthorization","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["uuid","password"],"properties":{"uuid":{"description":"用户ID","type":"string"},"password":{"description":"用户密码","type":"string"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"$ref":"#/components/schemas/AuthorizationCodeDTO"}}}]}]},"examples":{"授权成功":{"$ref":"#/components/examples/200|true"},"验证码错误":{"$ref":"#/components/examples/WRONG_CODE"}}}}}}}},"/users/yidun/captcha/verify":{"post":{"summary":"网易易盾验证码校验","tags":["infra"],"operationId":"Infra.yidunCaptchaVerify","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["validate"],"properties":{"validate":{"description":"易盾返回的二次验证数据","type":"string"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]}}}}}}},"/users/{user}/spaces":{"parameters":[{"$ref":"#/components/parameters/user"}],"get":{"summary":"获取用户空间列表","tags":["infra"],"operationId":"Infra.getUserSpaces","description":"获取用户空间列表，用于切换用户空间\n","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/SpaceDTO"}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}},"post":{"summary":"创建用户空间","tags":["infra"],"operationId":"Infra.createUserSpace","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["title","planType"],"properties":{"title":{"description":"空间名称","type":"string"},"planType":{"description":"空间类型","type":"string","enum":["freePersonal","freeTeam"]},"industry":{"description":"所在行业","type":"string"},"size":{"description":"公司规模","type":"string"},"scene":{"description":"使用场景","type":"string"}}},"example":{"title":"空间名称"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"$ref":"#/components/schemas/SpaceDTO"}}}]}]},"examples":{"创建成功":{"$ref":"#/components/examples/200|spaceInfo"},"创建失败":{"$ref":"#/components/examples/SPACE_CREATE_FAIL"}}}}}}}},"/share/users/{user}":{"parameters":[{"$ref":"#/components/parameters/user"}],"get":{"summary":"获取用户信息(与普通的获取用户信息不同，这里不会返回403)","tags":["infra"],"operationId":"Infra.getSharePageUser","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"$ref":"#/components/schemas/UserDTO"}}}]}]},"examples":{"获取成功":{"$ref":"#/components/examples/200|userInfo"}}}}}}}},"/users/{user}/root":{"parameters":[{"$ref":"#/components/parameters/user"}],"get":{"summary":"获取用户根信息","tags":["infra"],"operationId":"Infra.getUserRoot","description":"获取用户根信息（包括用户信息，space信息，spaceView信息）\n","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"$ref":"#/components/schemas/RecordInfoDTO"}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/users/occupations":{"get":{"summary":"获取用户职业列表","tags":["infra"],"operationId":"Infra.getUserOccupations","description":"获取用户职业列表\n","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/OccupationDTO"}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/spaces/{space}":{"parameters":[{"$ref":"#/components/parameters/space"}],"get":{"summary":"获取空间信息","tags":["infra"],"operationId":"Infra.getSpace","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"$ref":"#/components/schemas/SpaceDTO"}}}]}]},"examples":{"空间获取成功":{"$ref":"#/components/examples/200|spaceInfo"},"空间获取失败":{"$ref":"#/components/examples/SPACE_GET_FAIL"}}}}}}},"put":{"summary":"更新空间信息","tags":["infra"],"operationId":"Infra.updateSpace","description":"更新空间信息，只有 owner 可以更新\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"title":{"description":"空间名称","type":"string"},"icon":{"$ref":"#/components/schemas/IconData"}}},"example":{"title":"空间名称"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"$ref":"#/components/schemas/SpaceDTO"}}}]}]},"examples":{"空间更新成功":{"$ref":"#/components/examples/200|spaceInfo"},"空间更新失败":{"$ref":"#/components/examples/SPACE_UPDATE_FAIL"},"没有操作空间的权限":{"$ref":"#/components/examples/SPACE_NO_RIGHT"}}}}}}},"delete":{"summary":"删除空间","tags":["infra"],"operationId":"Infra.deleteSpace","description":"删除用户空间，只有 owner 可以删除\n","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]},"examples":{"空间删除成功":{"$ref":"#/components/examples/200|true"},"空间删除失败":{"$ref":"#/components/examples/SPACE_DELETE_FAIL"},"没有操作空间的权限":{"$ref":"#/components/examples/SPACE_NO_RIGHT"}}}}}}}},"/spaces/{space}/root":{"parameters":[{"$ref":"#/components/parameters/space"}],"get":{"summary":"获取空间根信息","tags":["infra"],"operationId":"Infra.getSpaceRoot","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"$ref":"#/components/schemas/RecordInfoDTO"}}}]}]}}}}}}},"/spaces/{space}/invitation":{"parameters":[{"$ref":"#/components/parameters/space"}],"get":{"summary":"获取空间邀请信息","tags":["infra"],"operationId":"Infra.getSpaceInvitation","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"$ref":"#/components/schemas/InvitationDTO"}}}]}]}}}}}}},"/spaces/{space}/blockCount":{"parameters":[{"$ref":"#/components/parameters/space"}],"get":{"summary":"获取空间块数量","tags":["infra"],"operationId":"Infra.getSpaceBlockCount","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"description":"块数量","type":"number"}}}]}]}}}}}}},"/spaces/{space}/invitation/reset":{"parameters":[{"$ref":"#/components/parameters/space"}],"post":{"summary":"重置空间邀请信息","tags":["infra"],"operationId":"Infra.resetSpaceInvitation","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"$ref":"#/components/schemas/InvitationDTO"}}}]}]}}}}}}},"/spaces/{space}/tocs":{"parameters":[{"$ref":"#/components/parameters/space"}],"get":{"summary":"获取空间目录树","tags":["infra"],"operationId":"Infra.getSpaceTocs","description":"获取空间目录树，需要传父节点 uuid，根目录传 spaceId\n","parameters":[{"in":"query","name":"parentId","description":"父节点 uuid，根目录传 spaceId","required":true,"schema":{"type":"string","example":"xxxx-xxxx-xxxx"}},{"in":"query","name":"type","description":"page|folder,不传全部返回","required":false,"schema":{"type":"string","example":"page"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/BlockDTO"}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/spaces/{space}/userSharedPages":{"parameters":[{"$ref":"#/components/parameters/space"}],"get":{"summary":"获取用户分享页列表","tags":["infra"],"operationId":"Infra.getSpaceUserSharedPages","responses":{"200":{"description":"recordMap 内包含 blocks，collectionViews，roles","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["pages","recordMap"],"properties":{"pages":{"description":"页面id列表","type":"array","items":{"type":"string"}},"recordMap":{"$ref":"#/components/schemas/RecordInfoDTO"}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/spaces/{space}/archives":{"parameters":[{"$ref":"#/components/parameters/space"}],"get":{"summary":"归档列表","tags":["infra"],"operationId":"Infra.getSpaceArchives","description":"归档列表，用于回收站\n","parameters":[{"$ref":"#/components/parameters/page"},{"$ref":"#/components/parameters/perPage"},{"in":"query","name":"type","description":"内容类型类型，现只支持传单个类型（page、file）或不传，不传则搜索所有的文件夹和页面","required":false,"schema":{"type":"string","example":"file"}}],"responses":{"200":{"description":"返回值 data 长度小于 pageSize 的后不再请求","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["total","page","list"],"properties":{"total":{"description":"总数","type":"integer"},"page":{"description":"页码","type":"integer"},"list":{"description":"文件列表","type":"array","items":{"$ref":"#/components/schemas/BlockArchivesDTO"}}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/spaces/{space}/trash":{"parameters":[{"$ref":"#/components/parameters/space"}],"get":{"summary":"回收站列表新接口","tags":["infra"],"operationId":"Infra.getSpaceTrash","description":"回收站列表\n","parameters":[{"$ref":"#/components/parameters/page"},{"$ref":"#/components/parameters/perPage"},{"in":"query","name":"type","description":"内容类型类型，现只支持传单个类型（page、file）或不传，不传则搜索所有的文件夹和页面","required":false,"schema":{"type":"string","example":"file|file"}}],"responses":{"200":{"description":"返回值 data 长度小于 pageSize 的后不再请求","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["results"],"properties":{"total":{"description":"总数","type":"integer"},"page":{"description":"页码","type":"integer"},"results":{"description":"结果列表","type":"array","items":{"$ref":"#/components/schemas/SimpleBlockDTO"}},"recordMap":{"$ref":"#/components/schemas/RecordInfoDTO"}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/spaces/{space}/init":{"parameters":[{"$ref":"#/components/parameters/space"},{"in":"query","name":"platform","description":"平台，不传根据请求头判断，根据请求头只区分桌面端和移动端，不区分touch","required":false,"schema":{"type":"string","enum":["web","mobile","touch"]}}],"post":{"summary":"空间初始化","tags":["infra"],"operationId":"Infra.initSpacePage","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"}]}]}}}}}}},"/spaces/{space}/members":{"parameters":[{"$ref":"#/components/parameters/space"}],"get":{"summary":"获取空间成员列表","tags":["infra"],"operationId":"Infra.getSpaceMembers","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"array","items":{"type":"object","required":["role","user"],"properties":{"role":{"$ref":"#/components/schemas/PermissionRole"},"user":{"$ref":"#/components/schemas/UserDTO"}}}}}}]}]}}}}}},"post":{"summary":"设置空间成员权限","tags":["infra"],"operationId":"Infra.setSpaceMemberRole","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["userId","role"],"properties":{"userId":{"type":"string"},"role":{"$ref":"#/components/schemas/PermissionRole"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"}]}]}}}}}},"put":{"summary":"添加空间成员权限","tags":["infra"],"operationId":"Infra.addSpaceMember","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["userId"],"properties":{"userId":{"type":"string"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"}]}]}}}}}},"delete":{"summary":"空间删除成员","tags":["infra"],"operationId":"Infra.removeSpaceMembers","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["userId"],"properties":{"userId":{"type":"string"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"}]}]}}}}}}},"/spaces/{space}/guests":{"parameters":[{"$ref":"#/components/parameters/space"}],"get":{"summary":"获取空间访客列表","tags":["infra"],"operationId":"Infra.getSpaceGuests","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["results","recordMap"],"properties":{"results":{"type":"array","items":{"type":"object","required":["userId","guestPageIds"],"properties":{"userId":{"type":"string"},"guestPageIds":{"type":"array","items":{"type":"string"}}}}},"recordMap":{"$ref":"#/components/schemas/RecordInfoDTO"}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}},"delete":{"summary":"空间删除访客","tags":["infra"],"operationId":"Infra.removeSpaceGuest","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["userId"],"properties":{"userId":{"type":"string"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"}]}]}}}}}}},"/spaces/{space}/subscriptionData":{"parameters":[{"$ref":"#/components/parameters/space"}],"get":{"summary":"获取空间订阅信息","tags":["infra"],"operationId":"Infra.getSpaceSubscriptionData","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["users","teamInfo","bots"],"properties":{"users":{"description":"空间用户列表,包含成员和访客","type":"array","items":{"type":"object","required":["userId","role"],"properties":{"userId":{"type":"string"},"role":{"$ref":"#/components/schemas/PermissionRole"}}}},"bots":{"description":"空间bot列表","type":"array","items":{"type":"object","required":["botId","role"],"properties":{"botId":{"type":"string"},"role":{"$ref":"#/components/schemas/PermissionRole"}}}},"teamInfo":{"description":"团队信息","type":"object","properties":{"size":{"description":"团队规模","type":"string"},"industry":{"description":"团队行业","type":"string"}}}}}}}]}]}}}}}}},"/spaces/{space}/domain/check":{"parameters":[{"$ref":"#/components/parameters/space"}],"post":{"summary":"校验用户自定义域名是否占用","tags":["infra"],"operationId":"Infra.postSpaceDomainCheck","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["domain"],"properties":{"domain":{"type":"string"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]},"examples":{"操作成功":{"$ref":"#/components/examples/200|true"},"空间不存在":{"$ref":"#/components/examples/SPACE_NONE"},"域名已被占用":{"$ref":"#/components/examples/DOMAIN_IS_OCCUPIED"}}}}}}}},"/spaces/{space}/bots":{"parameters":[{"$ref":"#/components/parameters/space"}],"get":{"summary":"获取空间机器人信息","tags":["infra"],"operationId":"Infra.getSpaceBots","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["botIds","recordMap"],"properties":{"botIds":{"type":"array","items":{"type":"string"}},"recordMap":{"$ref":"#/components/schemas/RecordInfoDTO"}}}}}]}]}}}}}}},"/spaces/plans":{"get":{"summary":"获取空间类型信息","tags":["infra"],"operationId":"Infra.getSpacePlans","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"array","items":{"type":"object","required":["planType","name","block","members","storage","template"],"properties":{"planType":{"type":"string"},"name":{"type":"string"},"block":{"$ref":"#/components/schemas/PlanAmountLimit"},"members":{"$ref":"#/components/schemas/PlanAmountLimit"},"storage":{"$ref":"#/components/schemas/PlanAmountLimit"},"file":{"$ref":"#/components/schemas/PlanAmountLimit"},"guest":{"$ref":"#/components/schemas/PlanAmountLimit"},"template":{"$ref":"#/components/schemas/PlanAmountLimit"}}}}}}]}]}}}}}}},"/spaces/createOptions":{"get":{"summary":"获取创建团队空间选项列表","tags":["infra"],"operationId":"Infra.getSpaceCreateOptions","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["sizeOptions","industryOptions"],"properties":{"sizeOptions":{"description":"团队空间大小","type":"array","items":{"$ref":"#/components/schemas/SelectOptionDTO"}},"industryOptions":{"description":"团队空间行业","type":"array","items":{"$ref":"#/components/schemas/SelectOptionDTO"}}}}}}]}]}}}}}}},"/invitation/{invitation}":{"parameters":[{"in":"path","name":"invitation","description":"邀请码","required":true,"schema":{"type":"string"}}],"get":{"summary":"邀请加入空间信息查询","tags":["infra"],"operationId":"Infra.getInvitationInfo","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["space","user","joined"],"properties":{"joined":{"type":"boolean","description":"是否已加入空间"},"user":{"type":"object","required":["uuid","nickname","avatar","backgroundColor"],"properties":{"uuid":{"type":"string"},"nickname":{"type":"string"},"avatar":{"type":"string"},"backgroundColor":{"type":"string"}}},"space":{"type":"object","required":["uuid","title","icon","backgroundColor"],"properties":{"uuid":{"type":"string"},"title":{"type":"string"},"backgroundColor":{"type":"string"},"icon":{"$ref":"#/components/schemas/IconData"}}}}}}}]}]},"examples":{"邀请码已失效":{"$ref":"#/components/examples/INVITE_EXPIRED"},"空间成员已满":{"$ref":"#/components/examples/SPACE_MEMBER_FULL"}}}}}}}},"/invitation/{invitation}/join":{"parameters":[{"in":"path","name":"invitation","description":"邀请码","required":true,"schema":{"type":"string"}}],"post":{"summary":"空间通过邀请添加成员","tags":["infra"],"operationId":"Infra.joinSpaceByInvitation","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"}]}]}}}}}}},"/spaces/teamApply":{"post":{"summary":"团队版申请","tags":["infra"],"operationId":"Infra.teamSpaceApply","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["company","companySize","industry","scene","phone"],"properties":{"company":{"type":"string","description":"公司名称"},"companySize":{"type":"string","description":"公司规模"},"industry":{"type":"string","description":"行业"},"scene":{"type":"string","description":"应用场景"},"phone":{"type":"string","description":"联系电话"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["qrCode"],"properties":{"qrCode":{"type":"string","description":"二维码链接"}}}}}]}]}}}}}}},"/spaces/changeType":{"post":{"summary":"空间类型切换","tags":["infra"],"operationId":"Infra.changeType","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["space","type"],"properties":{"space":{"type":"string","description":"空间id"},"type":{"type":"string","description":"空间类型(当前支持：freePersonal、freeTeam、trialTeam,但团队不支持切换为个人)"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"boolean"}}}]}]}}}}}}},"/spaces/getPublicData":{"post":{"summary":"获取空间公开信息","tags":["infra"],"operationId":"Infra.getSpacesPublicData","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["spaceIds"],"properties":{"spaceIds":{"type":"array","items":{"type":"string"}}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["spaces"],"properties":{"spaces":{"type":"object","additionalProperties":{"type":"object","required":["uuid","title","backgroundColor","planType","isShowAd"],"properties":{"uuid":{"type":"string"},"title":{"type":"string"},"backgroundColor":{"type":"string"},"planType":{"description":"空间类型","type":"string","enum":["freePersonal","freeTeam","personal","team"]},"icon":{"$ref":"#/components/schemas/IconData"},"domain":{"description":"用户自定义域名","type":"string"},"publicHomePage":{"description":"空间公开首页","type":"string"},"isShowAd":{"description":"是否显示广告","type":"boolean"},"isOfficialSpace":{"description":"是否是官方空间","type":"boolean"}}}}}}}}]}]}}}}}}},"/spaces/getPublicDataByDomain":{"post":{"summary":"通过域名获取空间公开信息","tags":["infra"],"operationId":"Infra.getPublicDataByDomain","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["domain"],"properties":{"domain":{"description":"自定义域名","type":"string"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["uuid","title","backgroundColor","planType"],"properties":{"uuid":{"type":"string"},"title":{"type":"string"},"backgroundColor":{"type":"string"},"planType":{"description":"空间类型","type":"string","enum":["freePersonal","freeTeam","personal","team"]},"icon":{"$ref":"#/components/schemas/IconData"},"domain":{"description":"用户自定义域名","type":"string"},"publicHomePage":{"description":"空间公开首页","type":"string"}}}}}]}]}}}}}}},"/archives/{archive}":{"parameters":[{"$ref":"#/components/parameters/archive"}],"delete":{"summary":"删除归档","tags":["infra"],"operationId":"Infra.deleteArchive","description":"删除归档，用于彻底删除\n","requestBody":{"required":false,"content":{"application/json":{"schema":{"type":"object","properties":{"spaceId":{"description":"空间 ID","type":"string"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]},"examples":{"删除成功":{"$ref":"#/components/examples/200|true"}}}}}}}},"/archives/{archive}/restore":{"parameters":[{"$ref":"#/components/parameters/archive"}],"patch":{"summary":"还原归档","tags":["infra"],"operationId":"Infra.restoreArchive","requestBody":{"required":false,"content":{"application/json":{"schema":{"type":"object","properties":{"spaceId":{"description":"空间 ID","type":"string"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]},"examples":{"还原成功":{"$ref":"#/components/examples/200|true"}}}}}}}},"/search/{space}/docs":{"parameters":[{"$ref":"#/components/parameters/space"}],"post":{"summary":"搜索文档记录","tags":["infra"],"operationId":"Infra.searchDocs","description":"搜索当前空间的文档\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["page","perPage","query"],"properties":{"page":{"description":"当前页","type":"number","example":1},"perPage":{"type":"number","description":"当前页的数量","example":10},"source":{"type":"string","description":"搜索来源, 正常搜索使用 quickFind, 分享页使用 quickFindPublic","example":"quickFind"},"query":{"type":"string","description":"搜索关键词"},"sort":{"$ref":"#/components/schemas/SearchDocSortType"},"filters":{"$ref":"#/components/schemas/SearchFilterDTO"}}}}}},"responses":{"200":{"description":"返回值 results 长度小于 perPage 的后不再请求","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["results"],"properties":{"total":{"description":"总数","type":"integer"},"results":{"description":"结果列表","type":"array","items":{"$ref":"#/components/schemas/SearchBlockDTO"}},"recordMap":{"$ref":"#/components/schemas/RecordInfoDTO"}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/search/{space}/references":{"parameters":[{"$ref":"#/components/parameters/space"}],"post":{"summary":"获取页面引用推荐","tags":["infra"],"operationId":"Infra.searchReferences","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["pageId"],"properties":{"pageId":{"description":"页面 ID","type":"string"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"$ref":"#/components/schemas/RecordInfoDTO"}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/search/{space}/actions":{"parameters":[{"$ref":"#/components/parameters/space"}],"get":{"deprecated":true,"summary":"获取用户操作列表","tags":["infra"],"operationId":"Infra.getActions","description":"用户操作列表，用于实现最近访问\n","parameters":[{"$ref":"#/components/parameters/page"},{"$ref":"#/components/parameters/perPage"}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/PageBlockInfoDTO"}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/upload/{space}":{"parameters":[{"$ref":"#/components/parameters/space"}],"post":{"deprecated":true,"summary":"上传文件","tags":["infra"],"operationId":"Infra.upload","requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","required":["file"],"properties":{"file":{"description":"文件","type":"integer"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","properties":{"url":{"description":"文件链接","type":"string"},"size":{"description":"文件大小","type":"integer"},"ossName":{"description":"oss 名称","type":"string"},"text":{"description":"文件名称","type":"string"},"fileType":{"$ref":"#/components/schemas/FileType"},"width":{"description":"宽度","type":"integer"},"height":{"description":"高度","type":"integer"}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/images_url/{blockId}/{ossName}":{"parameters":[{"in":"path","name":"blockId","description":"块 uuid","required":true,"schema":{"type":"string","example":"xxxx-xxxx-xxxx"}},{"in":"path","name":"ossName","description":"块 uuid","required":true,"schema":{"type":"string","example":"xxxx-xxxx-xxxx/aaaaaa"}}],"get":{"summary":"获取鉴权图片地址","tags":["infra"],"operationId":"Infra.imageUrl","description":"用户操作列表，用于实现最近访问\n","parameters":[{"in":"query","name":"img_process","description":"图片大小质量","required":false,"schema":{"type":"string","example":null}},{"in":"query","name":"filename","description":"文件名","required":false,"schema":{"type":"string","example":"aaaaaa.jpg"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["url","ttl"],"properties":{"url":{"description":"图片链接","type":"string"},"ttl":{"description":"缓存时间（秒）","type":"integer"}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/download_url/{blockId}/{ossName}":{"parameters":[{"in":"path","name":"blockId","description":"块 uuid","required":true,"schema":{"type":"string","example":"xxxx-xxxx-xxxx"}},{"in":"path","name":"ossName","description":"块 uuid","required":true,"schema":{"type":"string","example":"xxxx-xxxx-xxxx/aaaaaa"}}],"get":{"summary":"获取鉴权文件下载地址","tags":["infra"],"operationId":"Infra.DownloadUrl","description":"文件鉴权相关，用以获取鉴权后的文件下载url\n","parameters":[{"in":"query","name":"filename","description":"文件名","required":false,"schema":{"type":"string","example":"aaaaaa.jpg"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["url","ttl"],"properties":{"url":{"description":"下载链接","type":"string"},"ttl":{"description":"缓存时间（秒）","type":"integer"}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/users/creditBalance":{"get":{"summary":"获取总积分","tags":["infra"],"operationId":"Infra.creditBalance","description":"获取用户总积分\n","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"number","description":"总积分"}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/users/creditBalance/statistics":{"get":{"summary":"获取用户积分信息","tags":["infra"],"operationId":"Infra.creditBalanceStatistics","description":"获取用户积分信息\n","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["cumulativeScore","currentScore","invitedNum","todayScore","invitedScore"],"properties":{"cumulativeScore":{"description":"累计分数","type":"number"},"currentScore":{"description":"当前分数","type":"number"},"invitedNum":{"description":"邀请人数","type":"integer"},"todayScore":{"description":"今日获取积分","type":"integer"},"invitedScore":{"description":"邀请用户总积分","type":"number"},"aboutToExpireScore":{"description":"当月过期的临时积分","type":"number"}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/users/creditIncomes":{"get":{"summary":"获取积分记录列表","tags":["infra"],"operationId":"Infra.creditIncomes","description":"获取积分记录列表","parameters":[{"$ref":"#/components/parameters/page"},{"$ref":"#/components/parameters/perPage"}],"responses":{"200":{"description":"返回值 data 长度小于 pageSize 的后不再请求","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["total","page","list"],"properties":{"total":{"description":"总数","type":"integer"},"page":{"description":"页码","type":"integer"},"list":{"description":"记录列表","type":"array","items":{"$ref":"#/components/schemas/IntegralRecordDTO"}}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/users/{activity}/notLogged":{"parameters":[{"in":"path","name":"activity","description":"活动id","required":true,"schema":{"type":"string","example":"xxxx"}}],"get":{"summary":"未登录查询活动（只对需要阶梯兑换的活动有效）","tags":["infra"],"operationId":"Infra.getNotLoggedActivity","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"$ref":"#/components/schemas/ActivityDetailDTO"}}}]}]}}}}}}},"/users/find":{"get":{"summary":"查询用户","tags":["infra"],"operationId":"Infra.findUser","description":"查询用户","parameters":[{"in":"query","name":"phone","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"返回用户信息","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","properties":{"user":{"$ref":"#/components/schemas/UserDTO"}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/users/temporary":{"put":{"summary":"创建临时用户","tags":["infra"],"operationId":"Infra.temporary","description":"用以邀请未注册的外部访客","requestBody":{"content":{"application/json":{"schema":{"type":"object","required":["phone"],"properties":{"phone":{"type":"string","description":"手机号"}}}}}},"responses":{"200":{"description":"返回用户信息","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["user"],"properties":{"user":{"$ref":"#/components/schemas/UserDTO"}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/users/webVersion":{"get":{"summary":"获取用户版本，用以 web 更新提醒","tags":["infra"],"operationId":"Infra.getUserWebVersion","description":"获取用户版本，用以 web 更新提醒","parameters":[{"in":"query","name":"version","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"返回用户版本","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["version","pageId"],"properties":{"version":{"type":"string","description":"上次访问的版本号"},"pageId":{"type":"string","description":"更新信息页面的 id"}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/users/authentication":{"get":{"summary":"查询是否认证","tags":["infra"],"operationId":"Infra.isAuthentication","responses":{"200":{"description":"返回用户版本","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","properties":{"name":{"description":"姓名","type":"string"},"school":{"type":"integer","description":"学校"},"schoolName":{"type":"string","description":"学校名称"},"major":{"type":"integer","description":"专业"},"majorName":{"type":"string","description":"专业名称"},"type":{"type":"string","description":"认证类型，student和teacher"},"status":{"type":"integer","description":"认证状态（0：未认证；1：认证中；2：已认证）"}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}},"post":{"summary":"认证老师和学生","tags":["infra"],"operationId":"Infra.userAuthentication","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["name","identityCard","school","type","identityCardPicList","email","emailVerificationCode"],"properties":{"name":{"description":"姓名","type":"string"},"identityCard":{"type":"string","description":"身份证"},"school":{"type":"integer","description":"学校"},"major":{"type":"integer","description":"专业"},"entranceTime":{"type":"string","description":"开学时间"},"graduationTime":{"type":"string","description":"毕业时间"},"type":{"type":"string","description":"认证类型，student和teacher"},"identityCardPicList":{"type":"array","description":"身份证照片列表","items":{"type":"string"}},"email":{"type":"string","description":"邮箱"},"emailVerificationCode":{"type":"string","description":"邮箱验证码"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"}]}]}}}}}}},"/authentication/list":{"get":{"summary":"查询认证学校和专业列表","tags":["infra"],"operationId":"Infra.getSchoolAndMajor","responses":{"200":{"description":"返回认证学校和专业列表","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["schoolList","majorList"],"properties":{"schoolList":{"description":"学校列表","type":"array","items":{"properties":{"id":{"type":"integer","description":"序号"},"name":{"type":"string","description":"名称"}}}},"majorList":{"type":"array","description":"专业列表","items":{"properties":{"id":{"type":"integer","description":"序号"},"name":{"type":"string","description":"名称"}}}}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/activity/{activity}":{"parameters":[{"in":"path","name":"activity","description":"活动id","required":true,"schema":{"type":"string","example":"xxxx"}}],"get":{"summary":"查询活动信息","tags":["infra"],"operationId":"Infra.getActivityById","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"$ref":"#/components/schemas/ActivityDetailDTO"}}}]}]}}}}}}},"/activity/recently":{"get":{"summary":"查询最近一个活动信息","tags":["infra"],"operationId":"Infra.getRecentlyActivity","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"$ref":"#/components/schemas/ActivityDTO"}}}]}]}}}}}}},"/activity/list":{"parameters":[{"in":"query","name":"status","description":"活动状态","schema":{"type":"string","enum":["all","ready","doing","completed","abandoned"]}},{"in":"query","name":"type","description":"活动类型","schema":{"type":"string","enum":["all","guide","limitedTime","standing"]}}],"get":{"summary":"根据条件，查询活动列表","tags":["infra"],"operationId":"Infra.getActivityList","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["activityList"],"properties":{"activityList":{"type":"array","description":"活动列表","items":{"$ref":"#/components/schemas/ActivityDetailDTO"}},"basicList":{"type":"array","description":"基础活动列表","items":{"$ref":"#/components/schemas/ActivityDetailDTO"}},"advancedList":{"type":"array","description":"进阶活动列表","items":{"$ref":"#/components/schemas/ActivityDetailDTO"}}}}}}]}]}}}}}}},"/activity/{activity}/completed":{"parameters":[{"in":"path","name":"activity","description":"活动id","required":true}],"put":{"summary":"完成活动","tags":["infra"],"operationId":"Infra.completedActivity","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["viewed"],"properties":{"completed":{"type":"boolean","description":"true,表示完成活动任务；false,表示放弃任务"},"viewed":{"type":"boolean","description":"true,表示已查看活动；false,表示未查看活动"},"createdBy":{"type":"string","description":"收集表视图的创建者id或分享页创建者id"},"code":{"type":"string","description":"用户的邀请码（唯一标志用户的code）"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]}}}}}}},"/activity/{activity}/join":{"parameters":[{"in":"path","name":"activity","description":"活动id","required":true}],"post":{"summary":"参与（加）活动","tags":["infra"],"operationId":"Infra.joinActivity","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]}}}}}}},"/activity/{activity}/give/status":{"parameters":[{"in":"path","name":"activity","description":"活动id","required":true,"schema":{"type":"string","example":"xxxx"}}],"get":{"summary":"查询活动领取和发放状态","tags":["infra"],"operationId":"Infra.getActivityGiveStatus","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"description":"返回值(真正的响应体)","type":"object","properties":{"collarStatus":{"type":"integer","description":"活动奖励领取状态（0：未领取，1：已领取）","enum":[0,1]},"grantStatus":{"type":"integer","description":"活动奖励发放状态（0：未发放，1：已发放）","enum":[0,1]}}}}}]}]}}}}}}},"/activity/give":{"post":{"summary":"用户领取活动积分","tags":["infra"],"operationId":"Infra.addActivityAward","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["activity"],"properties":{"activity":{"description":"活动id","type":"string"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"description":"返回值(真正的响应体)","type":"object","properties":{"status":{"type":"integer","description":"用户认证状态"}}}}}]}]}}}}}}},"/plans/list":{"get":{"summary":"查询套餐列表","tags":["infra"],"operationId":"Infra.getPlanList","parameters":[{"in":"query","name":"type","description":"套餐类型(personal、team、all，默认personal）","schema":{"type":"string"}},{"in":"query","name":"payType","description":"支付类型，支持all","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"description":"返回值(真正的响应体)","type":"object","properties":{"list":{"type":"array","description":"套餐列表","items":{"$ref":"#/components/schemas/PlanDTO"}}}}}}]}]}}}}}}},"/plans/quote":{"post":{"summary":"查询套餐价格","tags":["infra"],"operationId":"Infra.getQuote","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["planId","spaceId","date","people"],"properties":{"planId":{"description":"套餐id","type":"string"},"spaceId":{"type":"string","description":"空间id"},"date":{"type":"integer","description":"时长"},"people":{"type":"integer","description":"人数"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"description":"返回值(真正的响应体)","type":"object","properties":{"createdAt":{"type":"number","description":"创建时间"},"amount":{"type":"number","description":"金额"},"amountUnit":{"type":"integer","description":"金额单位"},"desiredExpireTime":{"type":"number","description":"预计过期时间"}}}}}]}]}}}}}}},"/plans/createPreApply":{"post":{"summary":"H5生成预付订单(方便ios支付隐藏代码，出新接口)","tags":["infra"],"operationId":"Infra.createPreApply","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PreApplyRequestDTO"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"$ref":"#/components/schemas/PreApplyDTO"}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/pays/createPreOrder":{"post":{"summary":"生成预付订单","tags":["infra"],"operationId":"Infra.createPreOrder","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PreOrderRequestDTO"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"$ref":"#/components/schemas/PreOrderDTO"}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/pays/iphone/check":{"post":{"summary":"校验苹果支付订单","tags":["infra"],"operationId":"Infra.checkIphonePay","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/IphonePayRequestDTO"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]}}}}}}},"/orders/list":{"get":{"summary":"查询订单列表","tags":["infra"],"operationId":"Infra.getOrderList","parameters":[{"$ref":"#/components/parameters/page"},{"$ref":"#/components/parameters/perPage"},{"in":"query","name":"space","required":true,"description":"space的id","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["results","more","recordMap","page"],"properties":{"page":{"type":"integer","description":"页码"},"pendingList":{"description":"未支付订单列表","type":"array","items":{"$ref":"#/components/schemas/OrderDetailDTO"}},"more":{"type":"boolean","description":"是否还有更多"},"list":{"description":"完成订单列表","type":"array","items":{"$ref":"#/components/schemas/OrderDetailDTO"}}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/orders/{order}/cancel":{"parameters":[{"in":"path","name":"order","description":"订单id","required":true,"schema":{"type":"string","example":"xxxx"}}],"put":{"summary":"取消订单","tags":["infra"],"operationId":"Infra.cancelOrder","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]}}}}}}},"/orders/{order}/status":{"parameters":[{"in":"path","name":"order","description":"订单id","required":true,"schema":{"type":"string","example":"xxxx"}}],"get":{"summary":"查询订单状态","tags":["infra"],"operationId":"Infra.getOrderStatus","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"$ref":"#/components/schemas/PlanStatusDTO"}}}]}]}}}}}}},"/spaces/{space}/validTime":{"parameters":[{"in":"path","name":"space","description":"空间id","required":true,"schema":{"type":"string","example":"xxxx"}}],"get":{"summary":"查询空间套餐有效期","tags":["infra"],"operationId":"Infra.getSpacePlan","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"$ref":"#/components/schemas/SpacePlanDTO"}}}]}]}}}}}}},"/upload/getToken":{"get":{"summary":"获取上传token","tags":["infra"],"operationId":"Infra.getUploadToken","parameters":[{"in":"query","name":"source","description":"取值：spaceIcon、avatar、file、import、public、private，默认file","schema":{"type":"string"}},{"in":"query","name":"uuid","description":"接口返回的UUID，用于token续期（在上传大文件时，超过token有效期时长，用户续期token使用）","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["accessKeyId","accessKeySecret","securityToken","expiration","prefix","uuid"],"properties":{"accessKeyId":{"type":"string","description":"accessKeyId"},"accessKeySecret":{"type":"string","description":"accessKeySecret"},"securityToken":{"type":"string","description":"securityToken"},"expiration":{"type":"string","description":"token过期时间"},"prefix":{"type":"string","description":"授权上传路径的前缀"},"uuid":{"type":"string","description":"授权路径的uuid,token续期使用"}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/upload/getFileUploadInfo":{"post":{"summary":"文件上传获取token新接口","tags":["infra"],"operationId":"Infra.getFileUploadInfo","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["type","spaceId","fileName","size"],"properties":{"spaceId":{"description":"空间id","type":"string"},"type":{"type":"string","description":"文件类别（public、temp、file、private）"},"fileName":{"type":"string","description":"文件名称"},"size":{"type":"number","description":"文件大小"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["ossName","fileSecret","token"],"properties":{"ossName":{"type":"string","description":"文件上传位置"},"fileSecret":{"type":"string","description":"参数加密串"},"token":{"type":"object","required":["accessKeyId","accessKeySecret","securityToken"],"properties":{"accessKeyId":{"type":"string","description":"accessKeyId"},"accessKeySecret":{"type":"string","description":"accessKeySecret"},"securityToken":{"type":"string","description":"securityToken"}}}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/upload/getUnsignedInfo":{"post":{"summary":"用户未登录时，获取上传token及相关信息","tags":["infra"],"operationId":"Infra.getUnsignedInfo","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["viewId","spaceId"],"properties":{"viewId":{"description":"视图id","type":"string"},"spaceId":{"type":"string","description":"spaceId"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["currentCapacity","maxCapacity","token"],"properties":{"currentCapacity":{"type":"number","description":"当前容量"},"maxCapacity":{"type":"number","description":"最大容量"},"token":{"type":"object","required":["accessKeyId","accessKeySecret","securityToken","expiration","prefix","uuid"],"properties":{"accessKeyId":{"type":"string","description":"accessKeyId"},"accessKeySecret":{"type":"string","description":"accessKeySecret"},"securityToken":{"type":"string","description":"securityToken"},"expiration":{"type":"string","description":"token过期时间"},"prefix":{"type":"string","description":"授权上传路径的前缀"},"uuid":{"type":"string","description":"授权路径的uuid,token续期使用"}}}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/enqueueTask":{"post":{"summary":"发送任务到队列","tags":["infra"],"operationId":"Infra.enqueueTask","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["eventName","request"],"properties":{"eventName":{"type":"string","example":"export | import"},"request":{"type":"object","required":["blockId","spaceId"],"properties":{"blockId":{"type":"string"},"spaceId":{"type":"string"},"exportOptions":{"type":"object","properties":{"type":{"type":"string","example":"pdf | markdown | html | word"},"pdfFormat":{"type":"string","example":"a4 | a3"},"dataBaseRange":{"description":"多维表导出范围","type":"string","example":"current | all"},"scale":{"type":"number","example":1},"includeSubPages":{"description":"是否包含子页面","type":"boolean"},"includeContents":{"description":"是否包含媒体文件等","type":"boolean"},"flattenFileTree":{"description":"是否将文件夹展开","type":"boolean"},"collectionViewId":{"description":"多维表 viewId，导出多维表时必传","type":"string"}}},"importOptions":{"type":"object","properties":{"type":{"type":"string","example":"markdown | html | csv | word"},"ossName":{"type":"string","example":"xxx-xxxx-xxx"}}}}}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["taskId"],"properties":{"taskId":{"type":"string"}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/getTasks":{"post":{"summary":"获取任务信息","tags":["infra"],"operationId":"Infra.getTasks","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["taskIds"],"properties":{"taskIds":{"type":"array","items":{"type":"string","example":"xxx-xxx-xxx"}}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["results"],"properties":{"results":{"type":"object","additionalProperties":{"type":"object","required":["taskId","eventName","status"],"properties":{"taskId":{"type":"string","example":"xxx-xxx-xxx"},"eventName":{"type":"string","example":"export"},"status":{"type":"string","example":"success | in_progress"},"result":{"type":"object","properties":{"status":{"description":"导出结果是否成功","type":"string","example":"success | fail"},"url":{"description":"文件下载地址","type":"string","example":"https://..."},"size":{"description":"文件大小","type":"number"},"ossName":{"type":"string"},"uuid":{"type":"string"},"msg":{"description":"当 status 为 fail 时会返回","type":"string"}}}}}}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/covers/externalUrl/list":{"post":{"summary":"查询外部图片链接列表","tags":["infra"],"operationId":"Infra.getExternalUrlList","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["source"],"properties":{"search":{"type":"string","description":"搜索词"},"source":{"type":"string","description":"搜索来源，当前只支持unsplash"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"description":"返回值(真正的响应体)","type":"object","properties":{"results":{"type":"array","items":{"$ref":"#/components/schemas/ExternalUrlDTO"}}}}}}]}]}}}}}}},"/spaces/{space}/docs":{"parameters":[{"$ref":"#/components/parameters/space"}],"post":{"deprecated":true,"summary":"创建文档","tags":["editor"],"operationId":"Editor.createDoc","description":"创建文档，根节点 parentId 传 `root`\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/PrevIdDTO"},{"type":"object","required":["uuid","parentId"],"properties":{"uuid":{"description":"新建 uuid","type":"string"},"parentId":{"description":"父节点 uuid","type":"string"},"title":{"description":"标题","type":"string"}}}]},"example":{"uuid":"xxxx-xxxx-xxxx","parentId":"xxxx-xxxx-xxxx","prevId":"xxxx-xxxx-xxxx","title":"XXX"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"description":"文档 uuid","type":"string"}}}]}]},"examples":{"文档创建成功":{"value":{"code":200,"data":"xxxx-xxxx-xxxx"}}}}}}}}},"/docs/{doc}":{"parameters":[{"$ref":"#/components/parameters/doc"}],"get":{"summary":"获取页面信息","tags":["editor"],"operationId":"Editor.getDoc","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"$ref":"#/components/schemas/DocInfoDTO"}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]},"examples":{"未找到块":{"$ref":"#/components/examples/NO_DOC"},"无访问权限":{"$ref":"#/components/examples/UNAUTHORIZED"},"未找到空间":{"$ref":"#/components/examples/SPACE_NONE"},"分享未输入密码":{"$ref":"#/components/examples/SHARE_NO_PASSWORD"},"分享输入密码错误":{"$ref":"#/components/examples/SHARE_WRONG_PASSWORD"}}}}}}},"patch":{"deprecated":true,"summary":"更新文档信息","tags":["editor"],"operationId":"Editor.updateDoc","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"spaceId":{"description":"空间 id","type":"string"},"title":{"description":"标题","type":"string"},"cover":{"description":"背景图","type":"string"},"coverPos":{"description":"背景图位置","type":"number","format":"float"},"icon":{"description":"图标","type":"string"}}},"example":{"title":"标题","cover":"","coverPos":50,"icon":""}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]},"examples":{"更新成功":{"$ref":"#/components/examples/200|true"}}}}}}},"delete":{"deprecated":true,"summary":"删除文档","tags":["editor"],"operationId":"Editor.deleteDoc","description":"删除文档以及文档里的块\n","requestBody":{"required":false,"content":{"application/json":{"schema":{"type":"object","properties":{"spaceId":{"description":"空间 ID","type":"string"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]},"examples":{"删除成功":{"$ref":"#/components/examples/200|true"}}}}}}}},"/docs/{doc}/publicData":{"parameters":[{"$ref":"#/components/parameters/doc"}],"get":{"summary":"获取页面公开信息","tags":["editor"],"operationId":"Editor.getDocPublicData","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["spaceId","spaceTitle","spaceBackgroundColor"],"properties":{"spaceId":{"type":"string"},"spaceTitle":{"type":"string"},"spaceBackgroundColor":{"type":"string"},"spaceIcon":{"$ref":"#/components/schemas/IconData"},"ownerUser":{"$ref":"#/components/schemas/UserDTO"}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]},"examples":{"未找到块":{"$ref":"#/components/examples/NO_DOC"},"未找到空间":{"$ref":"#/components/examples/SPACE_NONE"}}}}}}}},"/docs/{doc}/backlinks":{"parameters":[{"$ref":"#/components/parameters/doc"}],"get":{"summary":"获取页面的反向链接","tags":["editor"],"operationId":"Editor.getDocBacklinks","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["results","recordMap","total"],"properties":{"results":{"type":"array","items":{"type":"object","properties":{"uuid":{"type":"string"},"pageId":{"type":"string"},"table":{"type":"string","enum":["block"]},"spaceId":{"type":"string"}}}},"recordMap":{"$ref":"#/components/schemas/RecordInfoDTO"},"backlinkCount":{"description":"反向链接的总数量, 包含没有权限的但不包含所在页面被删除的","type":"number"},"backlinkPageCount":{"description":"反向链接所在的页面总数量-去重","type":"number"}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]},"examples":{"未找到块":{"$ref":"#/components/examples/NO_DOC"},"无访问权限":{"$ref":"#/components/examples/UNAUTHORIZED"},"未找到空间":{"$ref":"#/components/examples/SPACE_NONE"}}}}}}}},"/docs/{doc}/move":{"parameters":[{"$ref":"#/components/parameters/doc"}],"patch":{"deprecated":true,"summary":"移动文档","tags":["editor"],"operationId":"Editor.moveDoc","description":"移动文档，根节点 parentId 传 `root`","requestBody":{"required":true,"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/PrevIdDTO"},{"type":"object","required":["parentId"],"properties":{"spaceId":{"description":"空间 ID","type":"string"},"parentId":{"description":"父 uuid","type":"string"}}}]},"examples":{"根节点 + 没前一个块":{"value":{"parentId":"root","prevId":""}},"父节点 + 前面有块":{"value":{"parentId":"xxxx-xxxx-xxxx","prevId":"xxxx-xxxx-xxxx"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]},"examples":{"移动成功":{"$ref":"#/components/examples/200|true"}}}}}}}},"/docs/{doc}/copy":{"parameters":[{"$ref":"#/components/parameters/doc"}],"patch":{"deprecated":true,"summary":"复制文档","tags":["editor"],"operationId":"Editor.copyDoc","description":"复制文档以及文档里的块\n","requestBody":{"content":{"application/json":{"schema":{"allOf":[{"type":"object","properties":{"spaceId":{"description":"空间 ID","type":"string"},"targetId":{"description":"新建uuid","type":"string"},"title":{"description":"标题名称","type":"string"}}}]},"example":{"targetId":"xxxx-xxxx-xxxx","title":"XXXX"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"description":"块 uuid","type":"string"}}}]}]},"examples":{"复制成功":{"$ref":"#/components/examples/200|uuid"}}}}}}}},"/docs/{doc}/navs":{"parameters":[{"$ref":"#/components/parameters/doc"}],"get":{"summary":"获取文档导航","tags":["editor"],"operationId":"Editor.getNavs","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"array","items":{"type":"object","required":["uuid","title","icon","status"],"properties":{"uuid":{"description":"块 uuid","type":"string"},"title":{"description":"标题","type":"string"},"icon":{"description":"图标","type":"string"},"status":{"$ref":"#/components/schemas/BlockStatus"}}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/docs/{doc}/blocks":{"parameters":[{"$ref":"#/components/parameters/doc"}],"get":{"deprecated":true,"summary":"获取文档块列表","tags":["editor"],"operationId":"Editor.getBlocks","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/BlockDTO"}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}},"post":{"deprecated":true,"summary":"新建文档块","tags":["editor"],"operationId":"Editor.createBlock","description":"新建文档块，需将前一个块 uuid 传给后端，用于后端排序\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/PrevIdDTO"},{"type":"object","properties":{"uuid":{"description":"新建 uuid","type":"string"},"parentId":{"description":"父块 uuid","type":"string"},"type":{"$ref":"#/components/schemas/BlockType"},"backgroundColor":{"description":"块背景颜色","type":"string"},"textColor":{"description":"块文字颜色","type":"string"}}},{"$ref":"#/components/schemas/BlockDataDTO"}]},"example":{"uuid":"xxx-xxxx-xxx","prevId":"none"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"description":"块 uuid","type":"string"}}}]}]},"examples":{"创建成功":{"$ref":"#/components/examples/200|uuid"}}}}}}}},"/docs/{doc}/visits":{"parameters":[{"$ref":"#/components/parameters/doc"}],"get":{"summary":"获取文档访问记录","tags":["editor"],"operationId":"Editor.getDocVisits","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["visits"],"properties":{"visits":{"type":"array","items":{"type":"object","required":["userId","spaceId","pageId","visitedAt","present","activityTime","blockId"],"properties":{"userId":{"type":"string"},"spaceId":{"type":"string"},"pageId":{"type":"string"},"visitedAt":{"type":"integer"},"present":{"type":"boolean"},"activityTime":{"type":"integer"},"blockId":{"type":"string"}}}}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}},"post":{"summary":"添加文档访问历史","tags":["editor"],"operationId":"Editor.addDocVisits","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"}]}]}}}}}}},"/docs/{doc}/activities":{"parameters":[{"$ref":"#/components/parameters/doc"}],"get":{"summary":"获取文档动态","tags":["editor"],"operationId":"Editor.getDocActivities","parameters":[{"in":"query","name":"startingAfterId","description":"从哪条记录之后开始查询，用以分页","required":false,"schema":{"type":"string"}},{"in":"query","name":"pageSize","description":"每页多少条记录, 默认20条","required":false,"schema":{"type":"integer"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["results","more","recordMap"],"properties":{"results":{"type":"array","description":"动态 id 列表","items":{"type":"object","required":["activityId"],"properties":{"activityId":{"type":"string"},"historyId":{"type":"string"},"historyCreatedAt":{"type":"number"}}}},"more":{"type":"boolean","description":"是否还有更多"},"recordMap":{"$ref":"#/components/schemas/RecordInfoDTO"}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/docs/image/random":{"get":{"summary":"随机获取一张背景图的ossName(java)","tags":["editor"],"operationId":"Editor.getCoverImage","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"description":"图片的ossName","type":"string","example":"图片名称"}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/docs/image/list":{"get":{"summary":"封面图列表(java)","tags":["editor"],"operationId":"Editor.getCoverImageList","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"description":"返回值(真正的响应体)","type":"array","items":{"type":"object","properties":{"groupName":{"type":"string","description":"分组名称","example":"分组1"},"list":{"type":"array","items":{"type":"object","required":["url","ossName"],"properties":{"description":{"type":"string","description":"一般图片名字"},"ossName":{"type":"string","description":"图片的ossName","example":"图片名称"},"url":{"type":"string","description":"图片完整路径","example":"www.baidu.com/图片名称.png"}}}}}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/docs/copySubNodes":{"post":{"summary":"复制subNodes","tags":["editor"],"operationId":"Editor.copySubNodes","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"spaceId":{"type":"string","description":"空间id"},"list":{"description":"被复制的uuid","type":"array","items":{"$ref":"#/components/schemas/BlockCopySubNodesDTO"}}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/docs/copyTemplate":{"post":{"summary":"复制模板","tags":["editor"],"operationId":"Editor.copyTemplate","requestBody":{"content":{"application/json":{"schema":{"required":["uuid","targetId"],"type":"object","properties":{"spaceId":{"type":"string","description":"空间id"},"uuid":{"description":"模板的uuid","type":"string"},"targetId":{"description":"目标id","type":"string"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/docs/{doc}/histories":{"parameters":[{"$ref":"#/components/parameters/doc"}],"get":{"summary":"查询某个文档的历史版本列表","tags":["editor"],"operationId":"Editor.getDocHistories","parameters":[{"$ref":"#/components/parameters/page"},{"$ref":"#/components/parameters/perPage"}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","properties":{"results":{"type":"array","items":{"$ref":"#/components/schemas/SnapshotDTO"}},"page":{"type":"integer","description":"当前页"},"more":{"type":"boolean","description":"是否有更多"}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/docs/{doc}/histories/{history}":{"parameters":[{"$ref":"#/components/parameters/doc"},{"$ref":"#/components/parameters/history"}],"get":{"summary":"获取历史文档详情信息","tags":["editor"],"operationId":"Editor.getDocHistoryDetail","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"$ref":"#/components/schemas/DocInfoDTO"}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/docs/{doc}/histories/{history}/restore":{"parameters":[{"$ref":"#/components/parameters/doc"},{"$ref":"#/components/parameters/history"}],"post":{"summary":"恢复页面历史版本","tags":["editor"],"operationId":"Editor.restoreDocHistory","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]},"examples":{"更新成功":{"$ref":"#/components/examples/200|true"}}}}}}}},"/docs/{doc}/leave":{"parameters":[{"$ref":"#/components/parameters/doc"}],"post":{"summary":"离开页面 - 删除自己在页面的权限","tags":["editor"],"operationId":"Editor.leaveDoc","requestBody":{"required":false,"content":{"application/json":{"schema":{"type":"object","properties":{"spaceId":{"description":"空间 ID","type":"string"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]},"examples":{"更新成功":{"$ref":"#/components/examples/200|true"}}}}}}}},"/docs/preview/batch":{"post":{"summary":"批量获取文档预览块","tags":["editor"],"operationId":"Editor.docsPreviewBatch","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["spaceId","blockIds"],"properties":{"spaceId":{"description":"空间 ID","type":"string"},"blockIds":{"description":"块 ID","type":"array","items":{"type":"string"}}}},"examples":{"示例":{"value":{"spaceId":"7941a280-04b9-4e63-9621-f5797d70fe0f","blockIds":["a1b2c3d4-e5f6-g7h8-i9j0-k1l2m3n4o5p6","a1b2c3d4-e5f6-g7h8-i9j0-k1l2m3n4o5p6"]}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"$ref":"#/components/schemas/DocInfoDTO"}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/docs/moveToSpace":{"post":{"summary":"跨空间移动块","tags":["editor"],"operationId":"Editor.docsMoveToSpace","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["spaceId","list"],"properties":{"spaceId":{"description":"移动到的空间ID","type":"string"},"list":{"description":"被移动的块ID列表，不能包含非页面块","type":"array","items":{"type":"string"}}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"$ref":"#/components/schemas/MoveToSpaceDTO"}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/docs/templates/search":{"get":{"summary":"模板搜索","tags":["editor"],"operationId":"Editor.searchTemplates","parameters":[{"in":"query","name":"keywords","description":"关键词","required":true,"schema":{"type":"string"}},{"in":"query","name":"spaceId","description":"空间id","required":false,"schema":{"type":"string"}},{"in":"query","name":"searchSource","description":"搜索来源,不传默认模板中心","required":false,"schema":{"type":"string","enum":["docTitle"]}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["hasSearchResult","recordMap"],"properties":{"hasSearchResult":{"type":"boolean","description":"是否有搜索结果"},"searchResult":{"type":"object","required":["my","official"],"properties":{"my":{"type":"array","description":"我的模板搜索结果(block id 数组)","items":{"type":"string"}},"official":{"type":"array","description":"官方模板搜索结果(block id 数组)","items":{"type":"string"}}}},"recommendResult":{"type":"array","description":"推荐模板(block id 数组)","items":{"type":"string"}},"recordMap":{"$ref":"#/components/schemas/RecordInfoDTO"}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/blocks/{block}":{"parameters":[{"$ref":"#/components/parameters/block"}],"get":{"summary":"获取文档块信息","tags":["editor"],"operationId":"Editor.getBlock","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"$ref":"#/components/schemas/BlockDTO"}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]},"examples":{"文档不存在":{"$ref":"#/components/examples/NO_DOC"},"无权限访问":{"$ref":"#/components/examples/UNAUTHORIZED"}}}}}}},"put":{"deprecated":true,"summary":"更新文档块信息","tags":["editor"],"operationId":"Editor.updateBlock","requestBody":{"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/SiblingsDTO"},{"type":"object","properties":{"spaceId":{"type":"string","description":"空间ID"},"type":{"$ref":"#/components/schemas/BlockType"},"backgroundColor":{"description":"块背景颜色","type":"string"},"textColor":{"description":"块文字颜色","type":"string"}}},{"$ref":"#/components/schemas/BlockDataDTO"}]}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]},"examples":{"更新成功":{"$ref":"#/components/examples/200|true"}}}}}}},"delete":{"deprecated":true,"summary":"删除文档块","tags":["editor"],"operationId":"Editor.deleteBlock","requestBody":{"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/SiblingsDTO"},{"type":"object","properties":{"spaceId":{"type":"string","description":"空间ID"}}}]}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]},"examples":{"删除成功":{"$ref":"#/components/examples/200|true"}}}}}}}},"/blocks/{block}/restore":{"parameters":[{"$ref":"#/components/parameters/block"}],"patch":{"deprecated":true,"summary":"恢复文档块","tags":["editor"],"operationId":"Editor.restoreBlock","description":"恢复删除的文档块\n","requestBody":{"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/SiblingsDTO"},{"type":"object","properties":{"spaceId":{"type":"string","description":"空间ID"}}}]},"example":{"prevId":"xxxx-xxxx-xxxx","siblings":["xxxx-xxxx-xxxx"]}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]},"examples":{"恢复成功":{"$ref":"#/components/examples/200|true"}}}}}}}},"/blocks/oss/file/batch":{"post":{"summary":"批量获取文件和文件夹 oss 地址","tags":["editor"],"operationId":"Editor.blocksOssFileBatch","description":"批量获取文件和文件夹 oss 地址, 并且返回 hash 值\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["userId","spaceId","blockIds"],"properties":{"userId":{"type":"string","description":"用户ID"},"spaceId":{"type":"string","description":"空间ID"},"blockIds":{"type":"array","description":"需要获取下载地址的块 ID","items":{"type":"string"}}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["blocks","checksum"],"properties":{"blocks":{"type":"array","description":"oss 块信息","items":{"type":"object","properties":{"id":{"type":"string","description":"块 ID"},"parentId":{"type":"string","description":"父块 ID"},"type":{"$ref":"#/components/schemas/BlockType"},"title":{"type":"string","description":"块标题"},"ossName":{"type":"string","description":"OSS 文件名"}}}},"checksum":{"description":"下载 HASH 校验","type":"string"}}}}}]}]}}}}}}},"/blocks/{block}/move":{"parameters":[{"$ref":"#/components/parameters/block"}],"patch":{"deprecated":true,"summary":"移动文档块","tags":["editor"],"operationId":"Editor.moveBlock","description":"移动文档块，需将 prevId 传给后端，用于后端排序\\\n如果 \"结组\" 则需要传 组的 uuid 作为 parentId\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/PrevIdDTO"},{"type":"object","required":["parentId"],"properties":{"spaceId":{"type":"string","description":"空间ID"},"parentId":{"description":"父 uuid","type":"string"},"actionType":{"$ref":"#/components/schemas/ActionType"}}},{"$ref":"#/components/schemas/SiblingsDTO"}]},"example":{"prevId":"xxxx-xxxx-xxxx","parentId":"xxxx-xxxx-xxxx","siblings":["xxxx-xxxx-xxxx"]}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]},"examples":{"移动成功":{"$ref":"#/components/examples/200|true"}}}}}}}},"/blocks/{block}/copy":{"parameters":[{"$ref":"#/components/parameters/block"}],"patch":{"summary":"复制文档块","tags":["editor"],"operationId":"Editor.copyBlock","requestBody":{"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/SiblingsDTO"},{"type":"object","properties":{"spaceId":{"type":"string","description":"空间ID"},"targetId":{"description":"新建uuid","type":"string"},"parentId":{"type":"string"},"prevId":{"type":"string"},"title":{"description":"新的标题，或者文件夹名，文件名","type":"string"}}}]},"example":{"targetId":"xxxx-xxxx-xxxx","siblings":["xxxx-xxxx-xxxx"],"parentId":"xxxx-xxxx-xxxx"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"allOf":[{"type":"object","required":["uuid"],"properties":{"uuid":{"description":"块 uuid","type":"string"},"children":{"description":"子块 uuid","type":"array","items":{"type":"object","required":["uuid","parentId","oldUuid"],"properties":{"uuid":{"description":"复制的子块的新 uuid","type":"string"},"parentId":{"description":"复制的子块的 parentId","type":"string"},"oldUuid":{"description":"客户端 uuid","type":"string"}}}}}},{"$ref":"#/components/schemas/SiblingsDTO"}]}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/blocks/{block}/convert":{"parameters":[{"$ref":"#/components/parameters/block"}],"patch":{"deprecated":true,"summary":"转换文档块","tags":["editor"],"operationId":"Editor.convertBlock","requestBody":{"required":true,"content":{"application/json":{"schema":{"allOf":[{"type":"object","required":["type"],"properties":{"spaceId":{"type":"string","description":"空间ID"},"type":{"$ref":"#/components/schemas/BlockType"},"level":{"description":"标题等级","type":"integer"},"pageId":{"description":"引用页面 uuid","type":"string"},"segments":{"type":"array","items":{"$ref":"#/components/schemas/SegmentDTO"}},"icon":{"description":"图标","type":"string"},"textColor":{"description":"文字颜色","type":"string"},"backgroundColor":{"description":"背景色","type":"string"}}},{"$ref":"#/components/schemas/SiblingsDTO"}]}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]},"examples":{"转换成功":{"$ref":"#/components/examples/200|true"}}}}}}}},"/blocks/{block}/merge":{"parameters":[{"$ref":"#/components/parameters/block"}],"patch":{"deprecated":true,"summary":"合并文档块","tags":["editor"],"operationId":"Editor.mergeBlock","description":"用于光标在 block 最前面时按退格键，当前 block 里内容与前一个合并\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PrevIdDTO"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]},"examples":{"转换成功":{"$ref":"#/components/examples/200|true"}}}}}}}},"/blocks/{block}/column":{"parameters":[{"$ref":"#/components/parameters/block"}],"patch":{"deprecated":true,"summary":"分栏文档块","tags":["editor"],"operationId":"Editor.columnBlock","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["isLeft"],"properties":{"spaceId":{"type":"string","description":"空间ID"},"isLeft":{"description":"左边","type":"boolean"},"block":{"description":"块 id","type":"string"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["columnId","children"],"properties":{"columnId":{"description":"分栏块 Id","type":"string"},"children":{"type":"array","items":{"type":"object","properties":{"uuid":{"description":"块 id","type":"string"},"parentId":{"description":"父 id","type":"string"}}}}}}}}]}]},"examples":{"分栏成功":{"value":{"code":200,"data":{"columnId":"xxxx-xxxx-xxxx","children":[{"uuid":"xxxx-xxxx-xxxx","parentId":"xxxx-xxxx-xxxx"}]}}}}}}}}}},"/blocks/transactions":{"post":{"deprecated":true,"summary":"批量操作块","tags":["editor"],"operationId":"Editor.transactionBlock","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SaveDTO"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]},"examples":{"操作成功":{"$ref":"#/components/examples/200|true"}}}}}}}},"/blocks/linkInfo":{"post":{"summary":"根据url,获取链接页面信息","tags":["editor"],"operationId":"Editor.linkInfo","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["url"],"properties":{"url":{"type":"string","description":"获取的完整url"},"headers":{"type":"array","description":"headers","items":{"type":"string"}}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["title","link"],"properties":{"title":{"description":"标题","type":"string"},"link":{"description":"链接","type":"string"},"description":{"description":"描述","type":"string"},"icon":{"type":"string","description":"图标"},"cover":{"type":"string","description":"背景图"},"headerMap":{"description":"headerMap,根据请求参数，查询header结果","type":"object","additionalProperties":{"type":"string"}}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/spaces/{space}/files":{"parameters":[{"$ref":"#/components/parameters/space"}],"get":{"summary":"查询所有文件","tags":["editor"],"operationId":"Editor.filesBlock","description":"查询所有文件","parameters":[{"$ref":"#/components/parameters/page"},{"$ref":"#/components/parameters/perPage"}],"responses":{"200":{"description":"返回值 data 长度小于 pageSize 的后不再请求","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["total","page","list"],"properties":{"total":{"description":"总数","type":"integer"},"page":{"description":"页码","type":"integer"},"list":{"description":"文件列表","type":"array","items":{"$ref":"#/components/schemas/BlockDiskDTO"}}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/spaces/{space}/search":{"parameters":[{"$ref":"#/components/parameters/space"}],"get":{"summary":"搜索文件或文件夹","tags":["editor"],"operationId":"Editor.searchBlock","description":"搜索文件或文件夹","parameters":[{"$ref":"#/components/parameters/page"},{"$ref":"#/components/parameters/perPage"},{"$ref":"#/components/parameters/search"},{"$ref":"#/components/parameters/fileType"},{"in":"query","name":"type","description":"内容类型类型（page、file），现只支持传单个类型","required":false,"schema":{"type":"string","example":"file|folder"}}],"responses":{"200":{"description":"返回值 data 长度小于 pageSize 的后不再请求","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["list"],"properties":{"total":{"description":"总数","type":"integer"},"page":{"description":"页码","type":"integer"},"list":{"description":"文件列表","type":"array","items":{"$ref":"#/components/schemas/BlockSearchDTO"}}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/search/docs":{"get":{"summary":"搜索新接口","tags":["editor"],"operationId":"Editor.SearchDocs","description":"搜索(doc)","parameters":[{"in":"query","name":"space","description":"spaceId","required":true,"schema":{"type":"string","example":"xxx"}},{"$ref":"#/components/parameters/page"},{"$ref":"#/components/parameters/perPage"},{"$ref":"#/components/parameters/search"},{"$ref":"#/components/parameters/fileType"},{"in":"query","name":"type","description":"内容类型类型，现只支持传单个类型（page、file、folder、collection）或不传，不传时搜索类型包括文件夹、页面、多维表页面和内嵌多维表","required":false,"schema":{"type":"string","example":"page"}},{"in":"query","name":"source","description":"搜索来源，取值为：move、trash、quickFind、collectionSettingsSource、relationMenu，默认：move类型（页面引用同move），当取值为trash或quickFind时，搜索类型为：文件夹、页面、多维表页面和内嵌多维表和文件，取值为collectionSettingsSource，表示搜索多维表，relationMenu与parentId配合使用，表示搜索当前父的可用下级块","required":false,"schema":{"type":"string","example":"move"}},{"in":"query","name":"parentId","description":"relationMenu与parentId配合使用，表示搜索当前父的可用下级块","required":false,"schema":{"type":"string","example":"xxx-xxx"}}],"responses":{"200":{"description":"返回值 data 长度小于 pageSize 的后不再请求","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["results"],"properties":{"total":{"description":"总数","type":"integer"},"page":{"description":"页码","type":"integer"},"results":{"description":"结果列表","type":"array","items":{"$ref":"#/components/schemas/SimpleBlockDTO"}},"recordMap":{"$ref":"#/components/schemas/RecordInfoDTO"}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/spaces/{space}/capacity":{"parameters":[{"$ref":"#/components/parameters/space"}],"get":{"summary":"查询当前空间容量使用情况","tags":["editor"],"operationId":"Editor.capacityBlock","description":"查询当前空间容量使用情况","responses":{"200":{"description":"当前空间容量使用情况","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["currentCapacity","maxCapacity"],"properties":{"currentCapacity":{"description":"当前空间网盘使用量","type":"integer"},"maxCapacity":{"description":"网盘最大容量","type":"integer"}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/shares/{share}/formView":{"parameters":[{"$ref":"#/components/parameters/share"}],"get":{"deprecated":false,"summary":"通过视图分享 ID 获取表单视图数据","tags":["editor"],"operationId":"Editor.formViewGetBlock","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"$ref":"#/components/schemas/CollectionFormViewInfoDTO"}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]},"examples":{"未找到块":{"$ref":"#/components/examples/NO_BLOCK"},"未找到视图":{"$ref":"#/components/examples/NO_VIEW"},"未登录":{"$ref":"#/components/examples/NO_LOGIN"},"违规内容无法访问":{"$ref":"#/components/examples/ILLEGAL_CONTENT"},"视图未分享":{"$ref":"#/components/examples/NOT_SHARED"},"视图分享已过期":{"$ref":"#/components/examples/SHARE_EXPIRED"},"用户重复提交":{"$ref":"#/components/examples/ONLY_ONE_SUBMIT"},"空间获取失败":{"$ref":"#/components/examples/GET_FAIL"},"无访问权限":{"$ref":"#/components/examples/FORBIDDEN"}}}}}}},"post":{"summary":"添加表单视图单行数据","tags":["editor"],"operationId":"Editor.formViewPostBlock","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["id","spaceId"],"properties":{"id":{"type":"string","description":"块 id"},"spaceId":{"type":"string","description":"空间 id"},"segments":{"type":"array","description":"文本内容","items":{"$ref":"#/components/schemas/SegmentDTO"}},"collectionProperties":{"description":"数据集属性值","type":"object","additionalProperties":{"type":"array","items":{"$ref":"#/components/schemas/SegmentDTO"}}}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]},"examples":{"操作成功":{"$ref":"#/components/examples/200|true"},"未找到块":{"$ref":"#/components/examples/NO_BLOCK"},"未找到视图":{"$ref":"#/components/examples/NO_VIEW"},"未登录":{"$ref":"#/components/examples/NO_LOGIN"},"违规内容无法访问":{"$ref":"#/components/examples/ILLEGAL_CONTENT"},"视图未分享":{"$ref":"#/components/examples/NOT_SHARED"},"视图分享已过期":{"$ref":"#/components/examples/SHARE_EXPIRED"},"用户重复提交":{"$ref":"#/components/examples/ONLY_ONE_SUBMIT"},"空间获取失败":{"$ref":"#/components/examples/GET_FAIL"},"无访问权限":{"$ref":"#/components/examples/FORBIDDEN"}}}}}}}},"/shares/{block}/complain":{"parameters":[{"$ref":"#/components/parameters/block"}],"post":{"summary":"用户举报","tags":["editor"],"operationId":"editor.shareComplain","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["email","complainType"],"properties":{"phone":{"description":"联系方式","type":"string"},"email":{"description":"邮箱","type":"string"},"description":{"description":"描述","type":"string"},"type":{"description":"举报审核类型（form:表单视图、block:块），默认为block","type":"string"},"complainType":{"description":"举报类型（1. 色情低俗，2. 垃圾广告，3. 造谣传谣，4. 政治不实信息，5. 涉嫌欺诈，6. 涉嫌赌博，7. 涉嫌非法集资，8. 涉暴涉恐，9. 邪教迷信，10. 宣扬不良价值观，11. 内容引人不适，12. 危险行为，13. 涉嫌侵权（交由我司人工审核），14. 其他违法违规）","type":"integer"},"pictureLinks":{"description":"图片oss名称列表","type":"array","items":{"type":"string"}}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]},"examples":{"举报已受理":{"$ref":"#/components/examples/COMPLAIN_FAIL"}}}}}}}},"/shares/{block}/appeal":{"parameters":[{"$ref":"#/components/parameters/block"}],"post":{"summary":"用户申诉","tags":["editor"],"operationId":"editor.shareAppeal","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["email"],"properties":{"phone":{"description":"联系方式","type":"string"},"email":{"description":"邮箱","type":"string"},"description":{"description":"描述","type":"string"},"type":{"description":"申诉审核类型（form:表单视图、block:块），默认为block","type":"string"},"pictureLinks":{"description":"图片oss名称列表","type":"array","items":{"type":"string"}}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]},"examples":{"申诉已受理":{"$ref":"#/components/examples/APPEAL_FAIL"}}}}}}}},"/shares/{block}/check":{"parameters":[{"$ref":"#/components/parameters/block"}],"get":{"summary":"核查是否能举报和申诉","tags":["editor"],"operationId":"editor.shareCheck","parameters":[{"in":"query","name":"type","description":"检查的类型（complain、appeal）","required":true,"schema":{"type":"string","example":"complain"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]}}}}}}},"/collectionViews/{view}":{"parameters":[{"in":"path","name":"view","description":"collectionView uuid","required":true,"schema":{"type":"string","example":"xxxx-xxxx-xxxx"}}],"get":{"summary":"获取单个 collectionView","tags":["editor"],"operationId":"Editor.getCollectionView","description":"获取单个 collectionView","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"$ref":"#/components/schemas/CollectionViewDTO"}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/records/transactions":{"post":{"summary":"批量操作记录","tags":["editor"],"operationId":"Editor.transactionRecords","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SaveDTO"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]},"examples":{"操作成功":{"$ref":"#/components/examples/200|true"}}}}}}}},"/records/query":{"post":{"summary":"批量查询记录","tags":["editor"],"operationId":"Editor.queryRecords","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RecordsQueryDTO"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"$ref":"#/components/schemas/RecordInfoDTO"}}}]},{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"}]}]}}}}}}},"/spaces/{space}/syncBlocks":{"parameters":[{"$ref":"#/components/parameters/space"}],"get":{"summary":"查询空间内更新的 block（客户端离线技术需求使用）","tags":["editor"],"operationId":"Editor.querySpaceUpdateBlocks","parameters":[{"in":"query","name":"time","description":"更新时间,毫秒时间戳","required":true,"schema":{"type":"integer","example":1589788888888}},{"in":"query","name":"type","description":"块类型，逗号分割","required":false,"schema":{"type":"string","example":"0,1"}},{"$ref":"#/components/parameters/page"},{"$ref":"#/components/parameters/perPage"}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","properties":{"list":{"type":"object","additionalProperties":{"type":"object","properties":{"role":{"$ref":"#/components/schemas/PermissionRole"},"value":{"$ref":"#/components/schemas/BlockDTO"}}}},"page":{"type":"integer","example":1},"more":{"type":"boolean"}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]}}}}}}},"/spaces/{space}/syncRecords":{"parameters":[{"$ref":"#/components/parameters/space"}],"get":{"summary":"查询空间内更新的 record（客户端离线技术需求使用）","tags":["editor"],"operationId":"Editor.querySpaceUpdateRecords","parameters":[{"in":"query","name":"time","description":"更新时间,毫秒时间戳","required":true,"schema":{"type":"integer","example":1589788888888}},{"in":"query","name":"table","description":"表名称","required":true,"schema":{"type":"string","enum":["block","collectionView"]}},{"$ref":"#/components/parameters/page"},{"$ref":"#/components/parameters/perPage"}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","properties":{"list":{"type":"array","items":{"oneOf":[{"$ref":"#/components/schemas/BlockDTO"},{"$ref":"#/components/schemas/CollectionViewDTO"}]}},"page":{"type":"integer","example":1},"more":{"type":"boolean"}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]}}}}}}},"/spaces/{space}/visitsHistory":{"parameters":[{"$ref":"#/components/parameters/space"}],"get":{"summary":"查询最近访问历史","tags":["editor"],"operationId":"Editor.querySpaceVisitsHistory","parameters":[{"in":"query","name":"sinceTimestamp","description":"查询从指定时间开始之后的记录","required":true,"schema":{"type":"integer","example":1589788888888}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","properties":{"results":{"type":"array","items":{"type":"object","properties":{"uuid":{"type":"string","example":"5e8f8f8f-8f8f-8f8f-8f8f-8f8f8f8f8f8f"}}}},"recordMap":{"$ref":"#/components/schemas/RecordInfoDTO"}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"}]}]}}}}}},"post":{"summary":"添加最近访问历史","tags":["editor"],"operationId":"Editor.addSpaceVisitsHistory","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["uuid"],"properties":{"uuid":{"description":"Page Id","type":"string"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]}}}}}}},"/spaces/{space}/collection":{"parameters":[{"$ref":"#/components/parameters/space"}],"post":{"summary":"查询空间汇总","tags":["editor"],"operationId":"Editor.querySpaceCollection","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["filterBlockTypes","filter","page","pageSize"],"properties":{"filterBlockTypes":{"type":"array","items":{"$ref":"#/components/schemas/BlockType"}},"filter":{"$ref":"#/components/schemas/CollectionFilterGroup"},"sorter":{"$ref":"#/components/schemas/CollectionSorter"},"page":{"description":"页码，从 1 开始","type":"integer"},"pageSize":{"description":"每页数量，最大50","type":"integer"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","properties":{"list":{"type":"array","items":{"type":"object","required":["uuid"],"properties":{"uuid":{"type":"string","example":"5e8f8f8f-8f8f-8f8f-8f8f-8f8f8f8f8f8f"}}}},"page":{"type":"integer","example":1},"more":{"type":"boolean"},"recordMap":{"$ref":"#/components/schemas/RecordInfoDTO"}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/download/folder":{"post":{"summary":"下载文件夹下的文件（去重后）","tags":["editor"],"operationId":"editor.downloadFolder","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["uuid"],"properties":{"uuid":{"description":"文件夹id","type":"string"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/StringDTO"}]}]}}}}}}},"/download/img":{"get":{"summary":"下载图片信息(返回数据流)","tags":["editor"],"operationId":"Editor.downloadImg","parameters":[{"in":"query","name":"url","description":"图片地址","required":true,"schema":{"type":"string","example":"https://static.wolai.com/wolai/wolai_og_icon.png"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/StringDTO"}]}]}}}}}}},"/spaces/{space}/images/recently":{"parameters":[{"$ref":"#/components/parameters/space"}],"get":{"summary":"查询最近上传的图片（icon或cover）","tags":["editor"],"operationId":"Editor.querySpaceRecentlyImages","parameters":[{"in":"query","name":"imgType","description":"图片类型（icon或cover）","required":true,"schema":{"type":"string","example":"icon"}},{"$ref":"#/components/parameters/page"},{"$ref":"#/components/parameters/perPage"}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","properties":{"page":{"type":"integer","description":"页码"},"total":{"type":"integer","description":"总数"},"list":{"type":"array","items":{"type":"object","required":["url","ossName"],"properties":{"url":{"description":"外部资源 url","type":"string"},"ossName":{"description":"oss 名称","type":"string"},"description":{"description":"文件名称","type":"string"},"illegal":{"description":"是否命中风控","type":"boolean"}}}}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/collection/{collection}/renameOption":{"parameters":[{"in":"path","name":"collection","description":"collection block id","required":true,"schema":{"type":"string","example":"xxxx-xxxx-xxxx"}}],"post":{"summary":"多维表 option 重命名","tags":["editor"],"operationId":"Editor.renameCollectionOption","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["property","oldValue","newValue"],"properties":{"property":{"type":"string","description":"属性id","example":"xxxx-xxxx-xxxx-xxxx"},"oldValue":{"type":"string","description":"原值","example":"原值"},"newValue":{"type":"string","description":"新值","example":"新值"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"}]}]}}}}}}},"/import":{"post":{"summary":"导入文档接口","tags":["editor"],"operationId":"Editor.import","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["type","ossName","uuid"],"properties":{"type":{"$ref":"#/components/schemas/ImportType"},"ossName":{"type":"string","description":"上传文件返回的 ossName","example":"import/xx-xx-xx/xx-xx-xx/fileName"},"uuid":{"type":"string","description":"导入页面 uuid","example":"xx-xx-xx"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","properties":{"uuid":{"type":"string","description":"导入页面 uuid"}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/import_temp_file":{"post":{"summary":"导入文档接口 - 剪藏生成临时导入文件","tags":["editor"],"operationId":"Editor.createImportTempFile","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["content"],"properties":{"content":{"type":"string","description":"md内容"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","properties":{"ossName":{"type":"string","description":"生成的临时文件名"}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/notifications/unread":{"get":{"summary":"获取通知未读数","tags":["editor"],"operationId":"Editor.getNotificationUnreadCount","parameters":[{"in":"query","name":"spaceId","description":"空间id，不传返回用户所有空间的未读数","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","properties":{"results":{"type":"array","items":{"type":"object","properties":{"spaceId":{"type":"string"},"unread":{"type":"object","properties":{"mentions":{"type":"integer","description":"提及消息的未读数"}}}}}}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/notifications/read":{"put":{"summary":"设置消息已读","tags":["editor"],"operationId":"Editor.setNotificationRead","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["spaceId"],"properties":{"spaceId":{"type":"string","description":"空间id,必传"},"channel":{"type":"string","description":"消息类型，目前只有 mentions，和 timestamp 同时传入时，会设置提及消息已读"},"timestamp":{"type":"integer","description":"毫秒时间戳，会把这个时间之前的所有消息设未已读，一般取端上最后一条消息的更新时间"},"notificationId":{"type":"string","description":"消息 id，如果传了这个，则只设置这条消息为已读，不与 channel, timestamp 共同使用"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]}}}}}}},"/notifications/list":{"get":{"summary":"获取通知列表","tags":["editor"],"operationId":"Editor.getNotificationList","parameters":[{"in":"query","required":true,"name":"spaceId","schema":{"type":"string"}},{"in":"query","required":true,"name":"channel","schema":{"type":"string"}},{"$ref":"#/components/parameters/page"},{"$ref":"#/components/parameters/perPage"}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","properties":{"notificationIds":{"type":"array","items":{"type":"string","description":"消息id"}},"more":{"type":"boolean","description":"是否还有更多"},"recordMap":{"$ref":"#/components/schemas/RecordInfoDTO"}}}}}]},{"$ref":"#/components/schemas/ErrorDTO"}]}}}}}}},"/notifications/clearJPushAlias":{"post":{"summary":"清理极光别名绑定设备","tags":["editor"],"operationId":"Editor.clearJPushAlias","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]}}}}}}},"/behavior/report":{"post":{"summary":"端上行为上报","tags":["infra"],"operationId":"Infra.behaviorReport","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["topic","business"],"properties":{"topic":{"type":"string","description":"主题","enum":["activity"]},"business":{"type":"object","description":"业务数据，map 类型，具体值参考业务文档"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]}}}}}}},"/files/download/oss/zip":{"post":{"summary":"使用获取的块信息批量下载文件","tags":["editor"],"operationId":"Editor.filesDownloadOssZip","description":"根据文件批量生成 zip 包，并返回下载地址\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["userId","blocks","checksum"],"properties":{"userId":{"type":"string","description":"用户ID"},"blocks":{"type":"array","description":"oss 下载地址","items":{"type":"object","properties":{"id":{"type":"string","description":"块 ID"},"parentId":{"type":"string","description":"父块 ID"},"type":{"$ref":"#/components/schemas/BlockType"},"title":{"type":"string","description":"块标题"},"ossName":{"type":"string","description":"OSS 文件名"}}}},"checksum":{"description":"下载 HASH 校验","type":"string"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["name","url"],"properties":{"name":{"description":"文件名","type":"string"},"url":{"description":"下载地址","type":"string","format":"url"}}}}}]}]}}}}}}},"/files/download/blocks/oss/zip":{"post":{"summary":"通过块 ID 批量下载文件","tags":["editor"],"operationId":"Editor.filesDownloadBlocksOssZip","description":"根据文件批量生成 zip 包，并返回下载地址\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["userId","spaceId","blockIds"],"properties":{"userId":{"type":"string","description":"用户ID"},"spaceId":{"type":"string","description":"空间ID"},"blockIds":{"type":"array","description":"需要获取下载地址的块 ID","items":{"type":"string"}}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["name","url"],"properties":{"name":{"description":"文件名","type":"string"},"url":{"description":"下载地址","type":"string","format":"url"}}}}}]}]}}}}}}},"/files/preview/oss/process":{"post":{"summary":"批量生成文件的预览图","tags":["editor"],"operationId":"Editor.filesPreviewOssProcess","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["ossNames"],"properties":{"ossNames":{"description":"需要生成预览图的 oss 文件","type":"array","items":{"type":"string"}}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]}}}}}}},"/browser/export":{"post":{"summary":"通过 URL 地址导出文件","tags":["editor"],"operationId":"Editor.browserExport","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["url"],"properties":{"url":{"description":"需要导出的 URL","type":"string"},"type":{"description":"导出类型","type":"string","enum":["html","pdf"]},"fileName":{"description":"可以自定义上传到 OSS 的文件名","type":"string"}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["ossName","content"],"properties":{"ossName":{"description":"上传到 oss 的地址, 用于后续调用导入接口","type":"string"},"content":{"description":"文件内容","type":"string"}}}}}]}]}}}}}}},"/integrations/{integrationId}":{"parameters":[{"in":"path","name":"integrationId","required":true,"schema":{"type":"string","example":"xxxx-xxxx-xxxx"}}],"delete":{"summary":"删除指定的集成","tags":["infra"],"operationId":"Infra.deleteIntegration","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]}}}}}}},"/integrations/{integrationId}/secret":{"parameters":[{"in":"path","name":"integrationId","required":true,"schema":{"type":"string","example":"xxxx-xxxx-xxxx"}}],"get":{"summary":"获取集成秘钥","tags":["infra"],"operationId":"Infra.getIntegrationSecret","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["secret"],"properties":{"secret":{"type":"string"}}}}}]}]}}}}}},"patch":{"summary":"重置集成秘钥","tags":["infra"],"operationId":"Infra.resetIntegrationSecret","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["secret"],"properties":{"secret":{"type":"string"}}}}}]}]}}}}}}},"/bots/{botId}":{"parameters":[{"in":"path","name":"botId","required":true,"schema":{"type":"string","example":"xxxx-xxxx-xxxx"}}],"delete":{"summary":"删除指定的Bot","tags":["infra"],"operationId":"Infra.deleteBot","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"$ref":"#/components/schemas/BooleanDTO"}]}]}}}}}}},"/bots/{botId}/token":{"parameters":[{"in":"path","name":"botId","required":true,"schema":{"type":"string","example":"xxxx-xxxx-xxxx"}}],"get":{"summary":"获取 bot token","tags":["infra"],"operationId":"Infra.getBotToken","responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["token"],"properties":{"secret":{"type":"string"}}}}}]}]}}}}}}},"/oauth/authorizationCode":{"post":{"summary":"oauth 授权","tags":["infra"],"operationId":"infra.createOauthAuthorizationCode","description":"oauth 授权\n","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["integrationId","spaceId","blockIdsForBot"],"properties":{"integrationId":{"type":"string"},"spaceId":{"type":"string"},"blockIdsForBot":{"type":"array","items":{"type":"string"}}}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"oneOf":[{"$ref":"#/components/schemas/ErrorDTO"},{"allOf":[{"$ref":"#/components/schemas/SuccessDTO"},{"type":"object","required":["data"],"properties":{"data":{"type":"object","required":["code"],"properties":{"code":{"type":"string"}}}}}]}]}}}}}}}},"components":{"schemas":{"BaseEntity":{"description":"基础字段","type":"object","properties":{"createdBy":{"description":"创建人","type":"string"},"createdAt":{"description":"创建时间","type":"integer"},"updatedBy":{"description":"更新人","type":"string"},"updatedAt":{"description":"更新时间","type":"integer"},"deletedBy":{"description":"删除人","type":"string"},"deletedAt":{"description":"删除时间","type":"integer"}}},"CaptchaEntity":{"description":"验证码","allOf":[{"type":"object","properties":{"captcha":{"description":"验证码","type":"string"},"phone":{"description":"手机号","type":"string"},"type":{"$ref":"#/components/schemas/CaptchaSendType"}}},{"$ref":"#/components/schemas/BaseEntity"}]},"TokenEntity":{"description":"访问令牌","allOf":[{"type":"object","properties":{"userId":{"description":"用户 uuid","type":"string"},"deviceId":{"description":"设备 uuid","type":"string"},"deviceType":{"$ref":"#/components/schemas/DeviceType"},"token":{"description":"访问令牌","type":"string"}}},{"$ref":"#/components/schemas/BaseEntity"}]},"UserEntity":{"description":"用户","allOf":[{"type":"object","properties":{"uuid":{"description":"用户 uuid","type":"string","uniqueItems":true},"nickname":{"description":"昵称","type":"string"},"phone":{"description":"手机号","type":"string"},"avatar":{"description":"用户头像","type":"string"},"inviteCode":{"description":"邀请码","type":"string"},"clipperLocation":{"description":"剪藏路径 (页面ID)","type":"string"}}},{"$ref":"#/components/schemas/BaseEntity"}]},"SpaceEntity":{"description":"空间","allOf":[{"type":"object","properties":{"uuid":{"description":"空间 uuid","type":"string"},"title":{"description":"空间名称","type":"string"},"icon":{"description":"图标","type":"string"},"ownerId":{"description":"拥有者 uuid","type":"string"}}},{"$ref":"#/components/schemas/BaseEntity"}]},"BlockEntity":{"description":"块","allOf":[{"type":"object","properties":{"uuid":{"description":"块 uuid","type":"string","uniqueItems":true},"parentId":{"description":"父节点 uuid","type":"string"},"spaceId":{"description":"空间 uuid","type":"string"},"type":{"$ref":"#/components/schemas/BlockType"},"title":{"description":"标题","type":"string"},"backgroundColor":{"description":"块背景色","type":"string"},"textColor":{"description":"块文字色","type":"string"},"data":{"$ref":"#/components/schemas/BlockDataDTO"},"version":{"description":"块版本","type":"integer"}}},{"$ref":"#/components/schemas/BaseEntity"}]},"ActionEntity":{"description":"用户操作","allOf":[{"type":"object","properties":{"userId":{"description":"用户 uuid","type":"string"},"blockId":{"description":"块 uuid","type":"string"}}},{"$ref":"#/components/schemas/BaseEntity"}]},"ArchiveEntity":{"description":"归档","allOf":[{"type":"object","properties":{"blockId":{"description":"块 uuid","type":"string"},"userId":{"description":"用户 uuid","type":"string"}}},{"$ref":"#/components/schemas/BaseEntity"}]},"ContentEntity":{"description":"排序表","allOf":[{"type":"object","properties":{"blockId":{"description":"块 uuid","type":"string"},"spaceId":{"description":"空间 uuid","type":"string"},"content":{"description":"排序数组","type":"array","items":{"type":"string"}},"type":{"$ref":"#/components/schemas/ContentType"}}},{"$ref":"#/components/schemas/BaseEntity"}]},"CollectionViewEntity":{"description":"视图","allOf":[{"type":"object","properties":{"spaceId":{"description":"空间 uuid","type":"string"},"parentId":{"description":"父节点 ID","type":"string"},"collectionId":{"description":"collection uuid","type":"string"},"shareId":{"description":"分享 uuid","type":"string"},"pageSort":{"description":"页面排序","type":"array","items":{"type":"string"}},"title":{"description":"标题","type":"string"},"type":{"$ref":"#/components/schemas/CollectionViewType"}}},{"$ref":"#/components/schemas/BaseEntity"}]},"IntegrationDTO":{"description":"集成","type":"object","required":["uuid","version","name","parentTable","parentId","createdAt","createdBy","updatedAt","updatedBy","status","redirectUris","info","capabilities"],"properties":{"uuid":{"type":"string"},"version":{"type":"integer"},"name":{"type":"string"},"parentTable":{"type":"string"},"parentId":{"type":"string"},"createdAt":{"type":"number"},"createdBy":{"type":"string"},"updatedAt":{"type":"number"},"updatedBy":{"type":"string"},"status":{"$ref":"#/components/schemas/BlockStatus"},"redirectUris":{"type":"array","items":{"type":"string"}},"info":{"type":"object","properties":{"icon":{"type":"string"},"email":{"type":"string"},"websiteUrl":{"type":"string"},"description":{"type":"string"},"developerName":{"type":"string"},"termsOfUseUrl":{"type":"string"},"privacyPolicyUrl":{"type":"string"},"installationInfoUrl":{"type":"string"},"screenshots":{"type":"array","items":{"type":"string"}}}},"capabilities":{"type":"object","properties":{"readContent":{"type":"boolean"},"insertContent":{"type":"boolean"},"updateContent":{"type":"boolean"},"readUserWithEmail":{"type":"boolean"},"readUserWithoutEmail":{"type":"boolean"}}}}},"BotDTO":{"description":"机器人","type":"object","required":["uuid","version","name","parentTable","parentId","createdAt","createdBy","status","spaceId","capabilities"],"properties":{"uuid":{"type":"string"},"version":{"type":"integer"},"name":{"type":"string"},"parentTable":{"type":"string"},"parentId":{"type":"string"},"createdAt":{"type":"number"},"createdBy":{"type":"string"},"updatedAt":{"type":"number"},"updatedBy":{"type":"string"},"status":{"$ref":"#/components/schemas/BlockStatus"},"spaceId":{"type":"string"},"integrationId":{"type":"string"},"icon":{"type":"string"},"capabilities":{"type":"object","properties":{"readContent":{"type":"boolean"},"insertContent":{"type":"boolean"},"updateContent":{"type":"boolean"},"readUserWithEmail":{"type":"boolean"},"readUserWithoutEmail":{"type":"boolean"}}}}},"ImportType":{"description":"文件导入类型","type":"string","enum":["markdown","csv","notion","html","word"]},"OneClickType":{"description":"一键登录类型","type":"integer","enum":["0|NETEASE_YIDUN|网易易盾"]},"OrderFolderType":{"description":"文件夹排序","type":"integer","enum":["0|TIME_REVERSED|时间倒序","1|TIME|时间","2|NAME|名称","3|NAME_REVERSED|名称倒序","4|SIZE|大小","5|SIZE_REVERSED|大小倒序"]},"MindMappingType":{"description":"思维导图类型","type":"integer","enum":["0|LOGIC_DIAGRAM_LEFT|逻辑图-左","1|LOGIC_DIAGRAM_RIGHT|逻辑图-右","2|MIND_MAPPING|思维导图","3|ORGANIZATION_STRUCTURE|组织结构"]},"MindMappingLineStyle":{"description":"思维导图线样式","type":"integer","enum":["0|NORMAL|标准","1|CUBIC_BEZIER|曲线"]},"UserAuthorizationType":{"description":"用户授权类型","type":"integer","enum":["0|PHONE|手机号","1|EMAIL|邮箱","2|APPLE|苹果","3|WECHAT|微信","4|QQ|QQ","5|PASSWORD|密码授权"]},"SearchDocSortType":{"description":"搜索文档排序类型","type":"string","enum":["relevance","last_edited_newest","last_edited_oldest","created_newest","created_oldest"]},"AggregationAction":{"description":"聚合操作","type":"string","enum":["none","countAll","countValue","countUniqueValue","countEmpty","countNotEmpty","percentEmpty","percentNotEmpty","checked","unchecked","percentChecked","percentUnchecked","sum","average","max","min","median","range","earliestDate","latestDate","dateRange","showUnique","showOrigin"]},"CoverAspectType":{"description":"封面比例","type":"string","enum":["contain","cover"]},"PhoneCheckStatus":{"description":"电话可用状态","type":"integer","enum":["0|CAN_SIGN|可注册","1|CAN_LOGIN|可登录"]},"CompleteStatus":{"description":"用户注册完善状态","type":"integer","enum":["0|UN_DONE|未完善","1|DONE|已完善"]},"RegisterStatus":{"description":"用户注册状态","type":"integer","enum":["0|UN_REGISTERED|未注册","1|REGISTERED|已注册"]},"CaptchaSendType":{"description":"验证码用途","type":"integer","enum":["0|LOGIN|登录","1|SIGNUP|注册","2|BIND_NEW|绑定","3|REMOVE_ACCOUNT|注销账号","4|INVITE|邀请协作","5|AUTH|校园邮箱认证","6|RESET_PASSWORD|重置密码","7|CHANGE_BIND|换绑手机号"]},"CollectionSchemaType":{"description":"多维表数据类型","type":"string","enum":["title","text","number","select","multi_select","date","checkbox","created_at","updated_at","created_by","updated_by","phone","email","url","file","person","formula","relation","rollup"]},"BlockType":{"description":"块类型","type":"integer","enum":["0|PAGE|页面","1|TEXTAREA|文字","2|LINK_PAGE|链接页面","3|TODO|待办","4|LIST|普通列表","5|ORDER_LIST|序号列表","6|FOLD_LIST|折叠列表","7|HEADER|标题","8|IMAGE|图片","9|DIVIDER|分割线","10|COLUMN_LIST|分栏","11|COLUMN|分栏列","12|QUOTE|引用文字","13|MARK|着重文字","14|FILE|文件","15|FOLDER|文件夹","16|REFERENCE|引用块","17|COLLECTION|数据集","18|COLLECTION_VIEW_PAGE|多维表页面","19|COLLECTION_VIEW|内嵌多维表","20|EMBED|内嵌页面","21|BOOKMARK|书签","22|COPY_INDICATOR|复制站位指示器","23|EQUATION|公式","24|SUMMARY_PAGE|汇总页","25|CODE|代码块","26|EXTERNAL_FILE|外部文件","27|TABLE|简单表格","28|TABLE_ROW|简单表格行","29|REFERENCE_COLLECTION|内嵌引用多维表","30|TEMPLATE|模板按钮","31|SYNC_CONTAINER|同步块","32|SYNC_REFERENCE|同步块引用","33|REFERENCE_COLLECTION_PAGE|内嵌多维表页面","34|PDF_PAGE|PDF 页面","35|PDF_ANNOTATION|PDF 标注","36|MIND_MAPPING|思维导图","37|MIND_MAPPING_PAGE|思维导图页面"]},"TextType":{"description":"文本类型","type":"integer","enum":["0|TEXT|文本","1|DATE|日期","2|EMOJI|表情","3|URL|链接","4|LINK_PAGE|页面链接","5|CODE|日期","6|DATETIME|日期时间","7|USER|圈人","8|EQUATION|公式","9|MENTION_BLOCK|行内块引用"]},"DeviceType":{"description":"设备类型","type":"integer","enum":["0|WEB","1|H5","2|ANRDOID","3|IOS","4|WXMP","5|DESK"]},"ContentType":{"description":"排序类型","type":"integer","enum":["0|PAGE","1|BLOCK"]},"ActionType":{"description":"移动方式, 不传默认 0","type":"integer","enum":["0|DRAG|拖动","1|LEFT|左缩进"]},"FileType":{"description":"文件类型","type":"integer","enum":["0|OTHER|未知","1|FOLDER|文件夹","2|IMAGE|图片","3|AUDIO|音频","4|VIDEO|视频","5|PDF","6|OFFICE","7|TXT"]},"DateFormat":{"description":"日期格式(特殊值：LL - 完整日期, relative - 相对日期)","type":"string","enum":["LL","YYYY/MM/DD","DD/MM/YYYY","MM/DD/YYYY","relative"]},"TimeFormat":{"description":"日期格式(h:mm A - 12小时, H:mm - 24小时)","type":"string","enum":["h:mm A","H:mm"]},"BlockStatus":{"description":"块状态","type":"integer","enum":["1|NORMAL|正常","-1|DELETED|删除","-2|DELETED_COMPLETE|彻底删除"]},"ActivityDetailDTO":{"type":"object","properties":{"uuid":{"type":"string","description":"活动id"},"name":{"type":"string","description":"活动名称"},"synopsis":{"type":"string","description":"活动概览"},"validNum":{"type":"integer","description":"有效次数"},"viewed":{"type":"boolean","description":"是否已查看"},"link":{"type":"string","description":"跳转链接"},"status":{"type":"string","description":"活动状态"},"type":{"type":"string","description":"活动类型"},"startTime":{"type":"number","description":"开始时间"},"endTime":{"type":"number","description":"结束时间"},"validUser":{"type":"integer","description":"有效人数"},"score":{"type":"integer","description":"活动积分"},"platform":{"type":"string","description":"活动有效平台（all、web、client）"},"ladder":{"type":"boolean","description":"是否是阶梯积分兑换,也可以表示是否需要参与"},"version":{"type":"integer","description":"版本（part2活动，版本为2）"},"oldUser":{"type":"integer","description":"老用户人数"},"newUser":{"type":"integer","description":"老用户人数"},"total":{"type":"number","description":"认证活动获取的积分"},"resourceList":{"type":"array","items":{"type":"object","properties":{"icon":{"type":"string","description":"icon地址"},"imgUrl":{"type":"string","description":"图片地址"},"content":{"type":"string","description":"文案"}}}},"ruleList":{"type":"array","items":{"type":"object","properties":{"title":{"type":"string","description":"规则标题"},"content":{"type":"array","description":"规则描述","items":{"type":"string"}}}}}}},"ActivityDTO":{"type":"object","required":["name"],"properties":{"name":{"description":"活动名称","type":"string"},"coverList":{"description":"活动海报图","type":"array","items":{"type":"string"}},"contentList":{"description":"内容列表","type":"array","items":{"type":"string"}},"ruleList":{"description":"规则列表","type":"array","items":{"type":"object","properties":{"title":{"description":"标题（问题）","type":"string"},"content":{"description":"内容（回答）","type":"array","items":{"type":"string"}}}}}}},"PlanConfigDTO":{"type":"object","properties":{"description":{"type":"object","properties":{"guide":{"type":"string"},"discountTag":{"type":"string"}}}}},"PlanDTO":{"type":"object","required":["id","name","paymentType"],"properties":{"id":{"type":"string","description":"套餐id"},"name":{"type":"string","description":"名称"},"originalPrice":{"type":"number","description":"原价"},"originalPriceUnit":{"type":"integer","description":"原价单位（0：其他、1：人民币、2：美元、3：欧元）"},"currentPrice":{"type":"number","description":"当前价格"},"currentPriceUnit":{"type":"integer","description":"当前价格单位（0：其他、1：人民币、2：美元、3：欧元）"},"spaceType":{"type":"string","description":"套餐空间类型（team或personal）"},"planType":{"type":"string","description":"套餐类型（integralRecord：积分、cash：现金、stuDiscountCash：学生现金优惠套餐、upgradeTeam：升级团队版、renewTeam：续费团队版）"},"description":{"type":"string","description":"套餐描述"},"monthNum":{"type":"number","description":"套餐月数"},"paymentType":{"type":"string","enum":["cash","integralRecord"],"description":"支付类型（cash、integralRecord）"},"productId":{"type":"string","description":"苹果商品id"}}},"PreApplyRequestDTO":{"type":"object","required":["planId","spaceId"],"properties":{"planId":{"description":"套餐id","type":"string"},"spaceId":{"type":"string","description":"spaceId"},"date":{"description":"升级及续费时长","type":"integer"},"people":{"description":"续费人数，2-99999，若当前空间人数超过2，下限用自己空间人数","type":"integer"}}},"PreApplyDTO":{"type":"object","properties":{"id":{"description":"订单id","type":"string"},"createdAt":{"description":"创建时间","type":"integer"},"remark":{"description":"团队版转账时的备注","type":"string"},"total":{"description":"团队版转账金额，显示以后端返回为准","type":"number"},"result":{"description":"H5支付跳转链接","type":"string"}}},"IphonePayRequestDTO":{"type":"object","required":["planId","secretStr","spaceId"],"properties":{"planId":{"description":"套餐id","type":"string"},"secretStr":{"type":"string","description":"苹果支付加密串"},"spaceId":{"type":"string","description":"spaceId"},"date":{"description":"升级及续费时长","type":"integer"},"people":{"description":"续费人数，2-99999，若当前空间人数超过2，下限用自己空间人数","type":"integer"}}},"PreOrderRequestDTO":{"type":"object","required":["planId","payType","spaceId"],"properties":{"planId":{"description":"套餐id","type":"string"},"payType":{"type":"string","description":"支付类型，irpay：积分支付、wxpay：微信支付、alipay：支付宝支付、offline：线下转账"},"spaceId":{"type":"string","description":"spaceId"},"date":{"description":"升级及续费时长","type":"integer"},"people":{"description":"续费人数，2-99999，若当前空间人数超过2，下限用自己空间人数","type":"integer"}}},"PreOrderDTO":{"type":"object","required":["orderId","createdAt"],"properties":{"orderId":{"description":"订单id","type":"string"},"qrCodeUrl":{"description":"微信二维码链接","type":"string"},"createdAt":{"description":"创建时间","type":"integer"},"remark":{"description":"转账时的备注","type":"string"},"amount":{"description":"转账金额，显示以后端返回为准","type":"number"},"expirationTime":{"type":"number","description":"订单过期时间（团队版线下支付使用）"},"prepayId":{"description":"预支付交易会话ID","type":"string"},"partnerId":{"type":"string","description":"商户号id"},"appId":{"type":"string","description":"应用id"},"nonceStr":{"type":"string","description":"随机串"},"packages":{"type":"string","description":"订单详情扩展值"},"timestamp":{"type":"number","description":"时间戳"},"sign":{"type":"string","description":"签名"}}},"PlanStatusDTO":{"type":"object","required":["orderId","status","createdAt"],"properties":{"orderId":{"type":"string","description":"订单id"},"status":{"type":"integer","description":"订单状态（10：待支付，20：已支付，30：已废弃）"},"createdAt":{"type":"integer","description":"创建时间"}}},"SpacePlanDTO":{"type":"object","required":["planType"],"properties":{"planType":{"type":"string","description":"套餐类型"},"startAt":{"type":"integer","description":"开始时间"},"endAt":{"type":"integer","description":"截止（结束）时间"},"maxPeople":{"type":"integer","description":"空间人数上限"}}},"CommandType":{"description":"指令","type":"string","enum":["set|SET","update|UPDATE","listRemove|LIST_REMOVE","listAfter|LIST_AFTER","listBefore|LIST_BEFORE","setPermission|SET_PERMISSION","removePermission|REMOVE_PERMISSION"]},"CollectionViewType":{"description":"多维表视图类型","type":"string","enum":["table","board","space","gallery","list","timeline","calendar","form"]},"CardSize":{"type":"string","description":"看板卡片大小","enum":["small","medium","large"]},"CoverType":{"type":"string","description":"看板卡片封面类型","enum":["none","pageCover","pageContent","fileProperty"]},"GroupSortType":{"type":"string","description":"排序方式(文本，日期，数字，relation)，取值：descending | ascending | manual","enum":["manual","ascending","descending"]},"GroupLevel":{"description":"分组方式(日期，文本) 日期：relative | day | week | month | year。文本： exact | alphabet_prefix","type":"string","enum":["relative","day","week","month","year","exact","alphabet_prefix"]},"FormPermission":{"description":"表单权限","type":"integer","enum":["0|LOGIN|登录后可以填写","1|NO_LOGIN|未登录可以填写","2|WORKSPACE|仅工作空间内可以填写","3|INVITE|仅邀请的用户可以填写"]},"CollectionTimelinePreference":{"type":"object","description":"时间轴显示维度设置","properties":{"centerTimestamp":{"description":"初始显示时居中的时间","type":"number"},"zoomLevel":{"description":"时间维度包括：year | quarter | month | biweek | week | day | hour","type":"string"}}},"CollectionViewProperties":{"type":"array","description":"属性展示","items":{"type":"object","required":["property","visible"],"properties":{"property":{"description":"属性id","type":"string"},"visible":{"description":"是否可见，默认可见","type":"boolean"},"width":{"description":"列宽","type":"number"}}}},"CollectionViewFormProperties":{"type":"array","description":"表单视图属性展示","items":{"type":"object","required":["property","visible"],"properties":{"property":{"description":"属性id","type":"string"},"visible":{"description":"是否可见，默认可见","type":"boolean"},"width":{"description":"列宽","type":"number"},"description":{"type":"array","description":"描述说明","items":{"$ref":"#/components/schemas/SegmentDTO"}},"showDescription":{"description":"是否显示描述说明","type":"boolean"},"required":{"description":"是否必填","type":"boolean"}}}},"PermissionRole":{"description":"权限角色","type":"string","enum":["reader","commenter","writer","editor","none"]},"PermissionType":{"description":"权限类型","type":"string","enum":["public","restricted","illegal","user","group","space","bot"]},"ErrorDTO":{"type":"object","required":["code","msg"],"properties":{"code":{"description":"错误业务状态码","type":"integer"},"msg":{"description":"错误提示","type":"string"}}},"SuccessDTO":{"type":"object","required":["code"],"properties":{"code":{"description":"成功状态码 200","type":"integer","enum":[200],"example":200}}},"BooleanDTO":{"type":"object","required":["data"],"properties":{"data":{"type":"boolean"}}},"StringDTO":{"type":"object","required":["data"],"properties":{"data":{"type":"string"}}},"RequestId":{"type":"object","properties":{"requestId":{"description":"请求 Id, uuid 和 时间戳 组合, 例如 `xxx-xxxx-xxx|1666688888888`","type":"string"}}},"PrevIdDTO":{"type":"object","required":["prevId"],"properties":{"prevId":{"description":"前一个块 uuid，没有传 `none`","type":"string"}}},"AuthorizationCodeDTO":{"type":"object","required":["data"],"properties":{"nickname":{"description":"昵称","type":"string"},"status":{"$ref":"#/components/schemas/RegisterStatus"},"authorizationCode":{"type":"string"}}},"PlanAmountLimit":{"type":"object","required":["max"],"properties":{"max":{"description":"最大","type":"integer"}}},"AuthorizationUserInfo":{"type":"object","properties":{"id":{"description":"ID","type":"string"},"email":{"description":"邮箱","type":"string"},"nickname":{"description":"昵称","type":"string"},"avatar":{"description":"头像","type":"string"}}},"SearchFilterDTO":{"type":"object","properties":{"ancestors":{"description":"搜索某个路径下的内容","type":"array","items":{"type":"string"}},"isTitleOnly":{"description":"是否只搜索标题","type":"boolean"},"isPublic":{"description":"是否只搜索公开内容","type":"boolean"},"types":{"description":"搜索某些类型的内容","type":"array","items":{"type":"number"}},"createdBy":{"description":"搜索指定创建者","type":"array","items":{"type":"string"}},"lastEditedTime":{"description":"搜索指定最后编辑时间范围","type":"object","properties":{"start":{"type":"number","description":"开始时间"},"end":{"type":"number","description":"结束时间"}}},"createdTime":{"description":"搜索指定创建时间范围","type":"object","properties":{"start":{"type":"number","description":"开始时间"},"end":{"type":"number","description":"结束时间"}}}}},"UserDTO":{"type":"object","required":["uuid","nickname","phone","backgroundColor","inviteCode","spaceViews","occupation","version","status"],"properties":{"uuid":{"description":"用户 uuid","type":"string"},"phone":{"description":"手机号","type":"string"},"nickname":{"description":"用户昵称","type":"string"},"backgroundColor":{"description":"用户头像背景色","type":"string"},"spaceViews":{"description":"用户空间视图列表（视图 id 数组）","type":"array","items":{"type":"string"}},"avatar":{"description":"用户头像","type":"string"},"inviteCode":{"description":"用户邀请码","type":"string"},"password":{"description":"密码, 永远返回 ********","type":"string"},"version":{"description":"块版本","type":"integer"},"status":{"$ref":"#/components/schemas/BlockStatus"},"createdAt":{"description":"创建时间","type":"integer"},"createdBy":{"description":"创建人","type":"string"},"updatedAt":{"description":"修改时间","type":"integer"},"updatedBy":{"description":"修改人","type":"string"},"occupation":{"description":"职业","type":"integer"},"promotionChannel":{"description":"推广渠道","type":"string"},"clipperLocation":{"description":"剪藏路径 (页面ID)","type":"string"},"ext":{"description":"扩展字段","type":"object","properties":{"email":{"$ref":"#/components/schemas/AuthorizationUserInfo"},"apple":{"$ref":"#/components/schemas/AuthorizationUserInfo"},"wechat":{"$ref":"#/components/schemas/AuthorizationUserInfo"},"qq":{"$ref":"#/components/schemas/AuthorizationUserInfo"}}},"setting":{"description":"用户设置","type":"object","properties":{"openPageMode":{"description":"打开页面模式","type":"string","enum":["jump","rightPage"]},"useRightPageByNew":{"description":"新建页面时默认使用右侧页面打开","type":"boolean"},"enableHighPerformance":{"description":"启用高性能模式","type":"boolean"},"pageWidthMode":{"description":"页面宽度模式","type":"string","enum":["fixed","auto"]}}}}},"SpaceDTO":{"type":"object","required":["uuid","title","backgroundColor","subNodes","domain","publicHomePage","customTemplates","isShowAd","setting","version","status"],"properties":{"uuid":{"description":"空间 uuid","type":"string"},"title":{"description":"空间名称","type":"string"},"icon":{"$ref":"#/components/schemas/IconData"},"backgroundColor":{"description":"空间头像背景色","type":"string"},"subNodes":{"description":"子 block id 列表","type":"array","items":{"type":"string"}},"views":{"description":"汇总页列表（视图 id 数组）","type":"array","items":{"type":"string"}},"planType":{"description":"空间类型","type":"string","enum":["freePersonal","freeTeam","personal","team"]},"permissions":{"description":"权限列表","type":"array","items":{"$ref":"#/components/schemas/PermissionDTO"}},"domain":{"description":"用户自定义二级域名","type":"string"},"publicHomePage":{"description":"用户自定义域名首页","type":"string"},"permissionGroups":{"description":"权限组","type":"array","items":{"$ref":"#/components/schemas/PermissionGroupDTO"}},"customTemplates":{"description":"自定义模板 (块 ID)","type":"array","items":{"type":"string"}},"isShowAd":{"description":"是否显示广告","type":"boolean"},"setting":{"$ref":"#/components/schemas/SpaceSettingDTO"},"version":{"description":"块版本","type":"integer"},"status":{"$ref":"#/components/schemas/BlockStatus"},"createdAt":{"description":"创建时间","type":"integer"},"createdBy":{"description":"创建人","type":"string"},"updatedAt":{"description":"修改时间","type":"integer"},"updatedBy":{"description":"修改人","type":"string"}}},"SpaceViewDTO":{"type":"object","required":["uuid","spaceId","userId","favoritePages","sharePages","setting","version","status","createdAt","createdBy","updatedAt","updatedBy"],"properties":{"uuid":{"description":"用户空间视图 uuid","type":"string"},"spaceId":{"type":"string"},"userId":{"type":"string"},"favoritePages":{"description":"收藏夹，pageId 数组","type":"array","items":{"type":"string"}},"sharePages":{"description":"分享页排序，pageId 数组","type":"array","items":{"type":"string"}},"setting":{"$ref":"#/components/schemas/SpaceViewSettingDTO"},"version":{"description":"块版本","type":"integer"},"status":{"$ref":"#/components/schemas/BlockStatus"},"createdAt":{"description":"创建时间","type":"integer"},"createdBy":{"description":"创建人","type":"string"},"updatedAt":{"description":"修改时间","type":"integer"},"updatedBy":{"description":"修改人","type":"string"}}},"SpaceViewSettingDTO":{"type":"object","properties":{"clipperPage":{"description":"剪藏页，pageId","type":"string"},"closeTemplateRecommend":{"description":"关闭模板推荐","type":"boolean"},"quickTemplates":{"description":"自定义快捷模板，pageId 数组","type":"array","items":{"type":"string"}},"closeQuickTemplates":{"description":"关闭快捷模板","type":"boolean"}}},"PageBlockInfoDTO":{"type":"object","description":"页面导航","required":["uuid","type","parentId","icon","title","navs"],"properties":{"uuid":{"description":"块 uuid","type":"string"},"type":{"$ref":"#/components/schemas/BlockType"},"parentId":{"description":"父块 uuid","type":"string"},"icon":{"description":"图标","type":"string"},"title":{"description":"标题","type":"string"},"ossName":{"description":"ossName","type":"string"},"extName":{"description":"后缀","type":"string"},"size":{"description":"文件大小","type":"integer"},"deletedAt":{"description":"删除时间","type":"integer"},"navs":{"description":"目录导航","type":"array","items":{"type":"object","required":["uuid","title"],"properties":{"uuid":{"description":"块 uuid","type":"string"},"title":{"description":"标题","type":"string"}}}}}},"MoveToSpaceDTO":{"type":"object","description":"跨空间移动信息","required":["spaceId","moveList"],"properties":{"spaceId":{"description":"移动到的空间id","type":"string"},"moveList":{"description":"移动到的块id","type":"array","items":{"required":["uuid","targetId"],"properties":{"uuid":{"description":"被移动的块ID","type":"string"},"targetId":{"description":"移动到的块id","type":"string"}}}}}},"DocInfoDTO":{"type":"object","description":"页面信息","required":["blocks"],"properties":{"blocks":{"description":"文档块 uuid","type":"object","additionalProperties":{"$ref":"#/components/schemas/BlockDTO"}},"collectionViews":{"description":"视图","type":"object","additionalProperties":{"$ref":"#/components/schemas/CollectionViewDTO"}},"roles":{"description":"角色","type":"object","additionalProperties":{"$ref":"#/components/schemas/PermissionRole"}},"discussions":{"description":"评论组","type":"object","additionalProperties":{"$ref":"#/components/schemas/DiscussionDTO"}},"comments":{"description":"评论","type":"object","additionalProperties":{"$ref":"#/components/schemas/CommentDTO"}}}},"CollectionFormViewInfoDTO":{"type":"object","description":"页面信息","required":["blocks"],"properties":{"blocks":{"description":"文档块 uuid","type":"object","additionalProperties":{"$ref":"#/components/schemas/BlockDTO"}},"view":{"$ref":"#/components/schemas/CollectionViewDTO"}}},"OrderDetailDTO":{"type":"object","description":"订单详情","properties":{"id":{"type":"string","description":"订单id"},"description":{"type":"string","description":"订单描述"},"createdAt":{"type":"integer","description":"订单创建时间"},"createdBy":{"type":"string","description":"创建人id"},"userName":{"type":"string","description":"用户名称"},"total":{"type":"number","description":"订单总价"},"currencyUnit":{"type":"integer","description":"单位"},"expirationTime":{"type":"integer","description":"订单过期时间"},"remark":{"type":"string","description":"线下转账备注"}}},"RecordInfoDTO":{"type":"object","description":"记录查询数据","properties":{"spaces":{"description":"空间信息","type":"object","additionalProperties":{"$ref":"#/components/schemas/SpaceDTO"}},"spaceViews":{"description":"用户空间视图信息","type":"object","additionalProperties":{"$ref":"#/components/schemas/SpaceViewDTO"}},"users":{"description":"用户信息","type":"object","additionalProperties":{"$ref":"#/components/schemas/UserDTO"}},"blocks":{"description":"文档块 uuid","type":"object","additionalProperties":{"$ref":"#/components/schemas/BlockDTO"}},"collectionViews":{"description":"视图","type":"object","additionalProperties":{"$ref":"#/components/schemas/CollectionViewDTO"}},"roles":{"description":"角色信息","type":"object","additionalProperties":{"$ref":"#/components/schemas/PermissionRole"}},"notifications":{"description":"通知信息","type":"object","additionalProperties":{"$ref":"#/components/schemas/NotificationDTO"}},"activities":{"description":"动态信息","type":"object","additionalProperties":{"$ref":"#/components/schemas/PageActivityDTO"}},"discussions":{"description":"评论组","type":"object","additionalProperties":{"$ref":"#/components/schemas/DiscussionDTO"}},"comments":{"description":"评论","type":"object","additionalProperties":{"$ref":"#/components/schemas/CommentDTO"}},"integrations":{"description":"集成信息","type":"object","additionalProperties":{"$ref":"#/components/schemas/IntegrationDTO"}},"bots":{"description":"机器人信息","type":"object","additionalProperties":{"$ref":"#/components/schemas/BotDTO"}}}},"CollectionQueryResultDTO":{"type":"object","description":"页面信息","required":["blocks"],"properties":{"recordMap":{"type":"object","properties":{"blocks":{"description":"文档块 uuid","type":"object","additionalProperties":{"$ref":"#/components/schemas/BlockDTO"}},"collectionViews":{"description":"视图","type":"object","additionalProperties":{"$ref":"#/components/schemas/CollectionViewDTO"}}}},"result":{"type":"object","properties":{"blockIds":{"type":"array","items":{"type":"string"}}}}}},"SiblingsDTO":{"type":"object","properties":{"siblings":{"description":"兄弟 uuid 列表","type":"array","items":{"description":"块 uuid","type":"string"}}}},"TextDTO":{"description":"text","type":"object","required":["text","enhancer"],"properties":{"text":{"description":"文本","type":"string"},"enhancer":{"description":"文本格式","type":"object","properties":{"bold":{"description":"粗体","type":"boolean"},"backgroundColor":{"description":"背景色","type":"string"},"italic":{"description":"斜体","type":"boolean"},"lineThrough":{"description":"中划线","type":"boolean"},"textColor":{"description":"文字颜色","type":"string"},"code":{"description":"代码","type":"boolean"},"underline":{"description":"下划线","type":"boolean"}}}}},"SegmentDTO":{"description":"文本片段","allOf":[{"$ref":"#/components/schemas/TextDTO"},{"type":"object","required":["type"],"properties":{"type":{"$ref":"#/components/schemas/TextType"},"url":{"description":"外部链接 (url)","type":"string"},"uuid":{"description":"linkPage 块 uuid，或者用户 uuid","type":"string"},"startDate":{"description":"开始日期","type":"string"},"startTime":{"description":"开始时间","type":"string"},"dateFormat":{"$ref":"#/components/schemas/DateFormat"},"timeFormat":{"$ref":"#/components/schemas/TimeFormat"},"fileStorageType":{"description":"文件存储类型(用于多维表文件列标识文件)","type":"string","enum":["internal","external"]},"width":{"description":"图片宽度","type":"integer"},"height":{"description":"图片高度","type":"integer"},"size":{"description":"文件大小","type":"integer"},"discussions":{"description":"关联评论组","type":"array","items":{"type":"string"}},"reminder":{"description":"提醒","type":"object","properties":{"time":{"description":"提醒时间, \"09:00\"","type":"string"},"value":{"description":"提前多少时间提醒, \"1\"","type":"number"},"unit":{"description":"时间单位","type":"string","enum":["day","hour","minute"]},"userPermissions":{"description":"设置提醒用户或用户组","type":"array","items":{"$ref":"#/components/schemas/PermissionDTO"}}}}}}]},"BlockMoveDTO":{"type":"object","nullable":true,"properties":{"movedAt":{"description":"移动时间","type":"number"},"movedBy":{"description":"移动操作人","type":"string"},"movedToSpaceId":{"description":"移动到的空间","type":"string"},"movedToBlockId":{"description":"移动到的块","type":"string"}}},"PDFAnnotationDTO":{"description":"PDF 文档标注","type":"object","required":["pageNumber","type"],"properties":{"pageNumber":{"description":"页码","type":"number"},"type":{"$ref":"#/components/schemas/PDFAnnotationType"},"pdfRects":{"description":"坐标 map","type":"object","additionalProperties":{"type":"array","items":{"$ref":"#/components/schemas/PDFCoordinate"}}},"path":{"description":"路径","type":"array","items":{"$ref":"#/components/schemas/Point"}},"ossName":{"description":"图片 ossName 地址","type":"string"},"size":{"description":"图片大小","type":"number"},"text":{"description":"文本信息","type":"string"},"width":{"description":"图片宽度","type":"number"},"height":{"description":"图片高度","type":"number"},"color":{"description":"标注颜色","type":"string"}}},"PDFAnnotationType":{"description":"PDF 标注类型","type":"string","enum":["rectangle","ellipse","polygon","highlight"]},"PDFCoordinate":{"description":"PDF 标注坐标","type":"object","properties":{"x":{"type":"number"},"y":{"type":"number"},"xMax":{"type":"number"},"yMax":{"type":"number"}}},"BlockDataDTO":{"type":"object","properties":{"pageId":{"description":"页面 uuid","type":"string"},"cover":{"description":"背景图 oss id","type":"string"},"coverPos":{"description":"背景图位置 (page)","type":"number","format":"float"},"icon":{"$ref":"#/components/schemas/IconData"},"segments":{"type":"array","description":"文本内容","items":{"$ref":"#/components/schemas/SegmentDTO"}},"caption":{"type":"array","description":"块说明内容","items":{"$ref":"#/components/schemas/SegmentDTO"}},"description":{"type":"array","description":"多维表描述","items":{"$ref":"#/components/schemas/SegmentDTO"}},"linkInfo":{"type":"array","description":"网页标签信息","items":{"$ref":"#/components/schemas/SegmentDTO"}},"checked":{"description":"是否勾选 (todo)","type":"boolean"},"level":{"description":"标题等级 (header)","type":"integer"},"fileId":{"description":"图片 uuid (image)","type":"string"},"width":{"description":"图像宽度(px)","type":"integer"},"height":{"description":"图像/embed 高度(px)","type":"integer"},"ratio":{"description":"图片/embed 比例(web端用)","type":"integer"},"link":{"description":"外部资源 url","type":"string"},"ossName":{"description":"oss 名称","type":"string"},"fileType":{"$ref":"#/components/schemas/FileType"},"widths":{"description":"分栏宽度 百分比数组 (column)","type":"array","items":{"type":"number","format":"float"}},"size":{"description":"大小 (file)","type":"integer"},"extName":{"description":"文件扩展名 (file)","type":"string"},"directoryMenu":{"description":"是否展示悬浮目录,默认不展示","type":"boolean"},"pageFixedWidth":{"description":"是固定宽度,默认不固定","type":"boolean"},"ref":{"description":"引用快引用目标 (file)","type":"object","properties":{"uuid":{"description":"被引用 uuid","type":"string"}}},"display":{"description":"引用块展示类型 (file|image|folder|audio|video|linkPage)","type":"string","enum":["file","image","folder","audio","video","linkPage"]},"viewMode":{"description":"引用块视图模式 (normal|card|preview)","type":"string","enum":["normal","card","preview"]},"embedType":{"type":"string","enum":["file","image","webpage","airtable","figma","sketch","modao","mockplus","excalidraw","processon","canva","bilibili","vqq","music163","codesandbox","codepen"]},"columnRatio":{"description":"分栏比例","type":"number","format":"float"},"schema":{"description":"多维表列定义","type":"object","additionalProperties":{"$ref":"#/components/schemas/CollectionSchema"}},"createdTemplateBy":{"description":"创建模板的用户","type":"string"},"collectionProperties":{"description":"数据集属性值","type":"object","additionalProperties":{"type":"array","items":{"$ref":"#/components/schemas/SegmentDTO"}}},"collectionPageProperties":{"$ref":"#/components/schemas/CollectionViewProperties"},"collectionCardColor":{"type":"object","description":"在时间轴/日历视图中以卡片显示时的背景颜色，grey, brown, orange, yellow, green, blue, purple, pink_purple, red","additionalProperties":{"type":"string"}},"headers":{"description":"结果为Map,根据请求参数，查询header结果","type":"object","additionalProperties":{"type":"string"}},"pdfAnnotation":{"$ref":"#/components/schemas/PDFAnnotationDTO"},"format":{"description":"格式","type":"object","properties":{"width":{"type":"integer"},"height":{"type":"integer"},"blockFullWidth":{"type":"boolean"},"blockPageWidth":{"type":"boolean","description":"图片块是否和页面同宽"},"language":{"type":"string","description":"代码块语言"},"listFormat":{"type":"string","description":"列表格式","enum":["disc","circle","square"]},"orderListFormat":{"type":"string","description":"有序列表格式","enum":["numbers","letters","roman"]},"listStartIndex":{"type":"integer","description":"列表起始索引"},"tableBlockColumnFormat":{"type":"object","description":"简单表格格式(宽度和颜色)","additionalProperties":{"type":"object","properties":{"width":{"type":"number","description":"宽度"},"textColor":{"type":"string","description":"文本颜色"},"backgroundColor":{"type":"string","description":"文本颜色"}}}},"tableBlockColumnOrder":{"type":"array","description":"简单表格列的排序方式","items":{"type":"string"}},"tableBlockColumnHeader":{"type":"boolean","description":"是否开启简单表格第一列高亮"},"tableBlockRowHeader":{"type":"boolean","description":"是否开启简单表格第一行高亮"},"locked":{"type":"boolean","description":"是否锁定页面，没有默认不锁定"},"lockedBy":{"type":"string","description":"锁定人"},"textColor":{"type":"string","description":"块的文本颜色"},"backgroundColor":{"type":"string","description":"块的背景颜色"},"codeWrap":{"type":"boolean","description":"代码是否自动换行，默认不换行"},"orderFolder":{"$ref":"#/components/schemas/OrderFolderType"},"pdfFormat":{"$ref":"#/components/schemas/PDFFormat"},"mindMappingFormat":{"$ref":"#/components/schemas/MindMappingFormat"},"isCutStoreContainer":{"type":"boolean","description":"是否是剪藏页面"},"contentGravity":{"$ref":"#/components/schemas/contentGravity","description":"块位置"},"captionGravity":{"$ref":"#/components/schemas/captionGravity","description":"块说明位置"},"isShowCaption":{"type":"boolean","description":"是否显示块说明"}}}}},"contentGravity":{"description":"块位置","type":"integer","enum":["0|LEFT|居左","1|CENTER|居中","2|RIGHT|居右"]},"captionGravity":{"description":"块说明位置","type":"integer","enum":["0|LEFT|居左","1|CENTER|居中","2|RIGHT|居右"]},"MindMappingFormat":{"type":"object","description":"思维导图","properties":{"type":{"$ref":"#/components/schemas/MindMappingType"},"lineStyle":{"$ref":"#/components/schemas/MindMappingLineStyle"},"oldBlockType":{"$ref":"#/components/schemas/BlockType"}}},"PDFFormat":{"type":"object","description":"pdf 格式信息","properties":{"rotation":{"type":"number","description":"pdf 旋转角度"},"password":{"type":"string","description":"pdf 密码"}}},"ExternalUrlDTO":{"type":"object","description":"unsplash信息","required":["id","width","height"],"properties":{"id":{"description":"id","type":"string"},"width":{"description":"宽度","type":"number"},"height":{"description":"高度","type":"number"},"created_at":{"description":"创建时间","type":"string"},"updated_at":{"description":"修改时间","type":"string"},"promoted_at":{"type":"string"},"color":{"type":"string"},"blur_hash":{"type":"string"},"description":{"type":"string"},"alt_description":{"type":"string"},"urls":{"type":"object","description":"urls","properties":{"raw":{"type":"string"},"full":{"type":"string"},"regular":{"type":"string"},"small":{"type":"string"},"thumb":{"type":"string"},"small_s3":{"type":"string"}}},"links":{"type":"object","description":"links","properties":{"self":{"type":"string"},"html":{"type":"string"},"download":{"type":"string"},"download_location":{"type":"string"}}},"likes":{"type":"number"},"liked_by_user":{"type":"boolean"},"topic_submissions":{"type":"object","description":"topic","properties":{"technology":{"type":"object","properties":{"status":{"type":"string"},"approved_on":{"type":"string"}}}}},"user":{"type":"object","description":"用户信息","properties":{"id":{"type":"string"},"updated_at":{"type":"string","description":"修改时间"},"username":{"type":"string"},"name":{"type":"string"},"first_name":{"type":"string"},"last_name":{"type":"string"},"twitter_username":{"type":"string"},"portfolio_url":{"type":"string"},"bio":{"type":"string"},"location":{"type":"string"},"links":{"type":"object","description":"链接","properties":{"following":{"type":"string"},"likes":{"type":"string"},"html":{"type":"string"},"self":{"type":"string"},"photos":{"type":"string"},"portfolio":{"type":"string"},"followers":{"type":"string"}}},"profile_image":{"type":"object","properties":{"small":{"type":"string"},"medium":{"type":"string"},"large":{"type":"string"}}},"instagram_username":{"type":"string"},"total_collections":{"type":"number"},"total_likes":{"type":"number"},"total_photos":{"type":"number"},"accepted_tos":{"type":"boolean"},"for_hire":{"type":"boolean"},"social":{"type":"object","description":"社交信息","properties":{"instagram_username":{"type":"string"},"portfolio_url":{"type":"string"},"paypal_email":{"type":"string"},"twitter_username":{"type":"string"}}}}},"tags":{"type":"array","description":"标记","items":{"type":"object","properties":{"type":{"type":"string"},"title":{"type":"string"}}}},"raw":{"type":"string"},"html":{"type":"string"},"name":{"type":"string"}}},"BlockSearchDTO":{"description":"搜索块对象","type":"object","required":["block","navs"],"properties":{"block":{"$ref":"#/components/schemas/BlockDTO"},"fileCount":{"type":"integer","description":"文件数"},"coverUrl":{"type":"string","description":"缩略图片url（大于20M,不进行缩略）"},"navs":{"type":"array","items":{"$ref":"#/components/schemas/BlockDTO"}}}},"BlockCopySubNodesDTO":{"description":"块复制对象","type":"object","required":["targetId","uuid"],"properties":{"uuid":{"description":"被复制的uuid","type":"string"},"targetId":{"description":"新的uuid","type":"string"},"isDescendant":{"description":"是否是下级，下级节点不修改创建人和修改人","type":"boolean"}}},"SimpleBlockDTO":{"description":"搜索结果块对象","type":"object","required":["uuid"],"properties":{"uuid":{"type":"string","description":"块id"},"coverUrl":{"type":"string","description":"缩略图片url（大于20M,不进行缩略)"},"deletedAt":{"type":"integer","description":"删除时间"}}},"SearchBlockDTO":{"description":"搜索结果块对象","type":"object","required":["uuid"],"properties":{"uuid":{"type":"string","description":"块id"},"pageId":{"type":"string","description":"页面id"},"hitText":{"type":"string","description":"命中的文本"},"spaceId":{"type":"string","description":"空间id"}}},"BlockArchivesDTO":{"description":"回收站块对象","type":"object","required":["block","navs"],"properties":{"block":{"$ref":"#/components/schemas/BlockDTO"},"navs":{"type":"array","items":{"$ref":"#/components/schemas/BlockDTO"}}}},"BlockDiskDTO":{"description":"网盘块对象","type":"object","required":["block","navs"],"properties":{"block":{"$ref":"#/components/schemas/BlockDTO"},"navs":{"type":"array","items":{"$ref":"#/components/schemas/BlockDTO"}}}},"SnapshotRecordDTO":{"description":"快照记录详情","type":"object","required":["blocks"],"properties":{"blocks":{"description":"文档块 uuid","type":"object","additionalProperties":{"$ref":"#/components/schemas/BlockDTO"}},"collectionViews":{"description":"视图","type":"object","additionalProperties":{"$ref":"#/components/schemas/CollectionViewDTO"}}}},"SnapshotDTO":{"description":"快照列表","type":"object","required":["id","createdAt","createdBy","spaceId"],"properties":{"uuid":{"type":"string","description":"记录id"},"createdAt":{"description":"创建时间","type":"integer"},"createdBy":{"description":"创建人","type":"string"},"spaceId":{"description":"空间id","type":"string"},"pageId":{"description":"页面id","type":"string"},"description":{"description":"描述","type":"string"},"userList":{"description":"编辑人列表","type":"array","items":{"type":"object","required":["uuid","nickname"],"properties":{"uuid":{"description":"用户id","type":"string"},"nickname":{"type":"string","description":"用户昵称"}}}}}},"IntegralRecordDTO":{"description":"积分对象","type":"object","required":["id","scores","type","title"],"properties":{"id":{"type":"number","description":"记录id"},"createdAt":{"description":"创建时间","type":"integer"},"type":{"type":"integer","description":"积分类型(1：用户注册、2：邀请好友)"},"score":{"type":"number","description":"积分"},"phone":{"type":"string","description":"手机尾号"},"title":{"type":"string","description":"记录名称"}}},"BlockDTO":{"description":"块","type":"object","required":["uuid","spaceId","parentId","type","backgroundColor","textColor","data","version","subNodes","permissions","createdAt","createdBy","updatedAt","updatedBy"],"properties":{"uuid":{"description":"块 uuid","type":"string","uniqueItems":true},"spaceId":{"description":"空间 uuid","type":"string"},"parentId":{"description":"父节点 uuid","type":"string"},"type":{"$ref":"#/components/schemas/BlockType"},"backgroundColor":{"description":"块背景色","type":"string"},"textColor":{"description":"块文字色","type":"string"},"data":{"$ref":"#/components/schemas/BlockDataDTO"},"moved":{"$ref":"#/components/schemas/BlockMoveDTO"},"subNodes":{"description":"子 block id 列表","type":"array","items":{"type":"string"}},"views":{"description":"视图列表(collection_view_page与collection_view用)","type":"array","items":{"type":"string"}},"permissions":{"description":"权限","type":"array","items":{"$ref":"#/components/schemas/PermissionDTO"}},"isTemplate":{"description":"是否为模板页面","type":"boolean"},"templatePages":{"description":"模板页面列表-目前只有多维表使用, 有排序","type":"array","items":{"type":"string"}},"version":{"description":"块版本","type":"integer"},"status":{"$ref":"#/components/schemas/BlockStatus"},"createdAt":{"description":"创建时间","type":"integer"},"createdBy":{"description":"创建人","type":"string"},"updatedAt":{"description":"修改时间","type":"integer"},"updatedBy":{"description":"修改人","type":"string"},"deletedAt":{"description":"删除时间","type":"integer"},"deletedBy":{"description":"删除人","type":"string"},"discussions":{"description":"关联评论组","type":"array","items":{"type":"string"}}}},"PermissionDTO":{"description":"权限","type":"object","required":["type"],"properties":{"role":{"$ref":"#/components/schemas/PermissionRole"},"type":{"$ref":"#/components/schemas/PermissionType"},"allowDuplicate":{"description":"分享时是否允许复制，默认允许，如果设置为false，则不允许复制","type":"boolean"},"userId":{"description":"用户id, 如果是用户类型权限，则必填","type":"string"},"groupId":{"description":"组id, 如果是组类型权限，则必填","type":"string"},"isGuest":{"description":"是否是访客权限","type":"boolean"},"password":{"description":"分享的密码","type":"string"},"botId":{"description":"机器人id, 如果是机器人类型权限，则必填","type":"string"},"parentTable":{"description":"机器人父级,可能是 user 或者 space","type":"string"},"parentId":{"description":"机器人父id","type":"string"},"shareShowSidebar":{"description":"分享页面是否显示侧边栏","type":"boolean"},"capabilities":{"description":"机器人能力列表","type":"object","properties":{"readContent":{"description":"是否允许读取内容","type":"boolean"},"insertContent":{"description":"是否允许插入内容","type":"boolean"},"updateContent":{"description":"是否允许更新内容","type":"boolean"}}}}},"SpaceSettingDTO":{"description":"空间设置选项","type":"object","properties":{"isShowBacklink":{"description":"是否显示引用记录","type":"boolean"}}},"PermissionGroupDTO":{"description":"权限组","type":"object","required":["id","name","userIds"],"properties":{"id":{"description":"权限组id","type":"string"},"name":{"description":"权限组名称","type":"string"},"icon":{"$ref":"#/components/schemas/IconData"},"userIds":{"description":"用户id列表","type":"array","items":{"type":"string"}}}},"RecordsQueryDTO":{"description":"批量查询","type":"object","required":["requests"],"properties":{"requests":{"type":"array","items":{"type":"object","required":["id","table"],"properties":{"id":{"description":"id","type":"string"},"table":{"description":"table","type":"string","enum":["block","space","user","collectionView","spaceView"]},"spaceId":{"description":"spaceId, 查询 block 时必填","type":"string"}}}}}},"SaveDTO":{"description":"批量操作块","type":"object","required":["requestId","transactions"],"properties":{"requestId":{"description":"请求id(uuid 随机生成)","type":"string"},"transactions":{"description":"事务组","type":"array","items":{"$ref":"#/components/schemas/TransactionDTO"}}}},"TransactionDTO":{"description":"批量操作块-单个事务","type":"object","required":["id","operations"],"properties":{"id":{"description":"事务id(uuid 随机生成)","type":"string"},"spaceId":{"description":"当前空间id","type":"string"},"operations":{"description":"操作列表","type":"array","items":{"$ref":"#/components/schemas/OperationDTO"}}}},"OperationDTO":{"description":"批量操作块-单个操作","type":"object","required":["id","table","path","command","args"],"properties":{"id":{"description":"block id","type":"string"},"table":{"description":"表","type":"string","enum":["block","space","user","collectionView","spaceView"]},"path":{"description":"操作的属性的路径","type":"array","items":{"type":"string"}},"command":{"$ref":"#/components/schemas/CommandType"},"args":{"description":"block id","oneOf":[{"type":"number","description":"某个`数字`类型的值"},{"type":"string","description":"某个`字符串`类型的值"},{"$ref":"#/components/schemas/BlockDTO"},{"$ref":"#/components/schemas/BlockDataDTO"},{"$ref":"#/components/schemas/CollectionViewDTO"}]}}},"FileBasicDTO":{"type":"object","description":"文件基本信息","required":["uuid","title","type"],"properties":{"uuid":{"description":"uuid","type":"string"},"title":{"description":"文件名","type":"string"},"icon":{"description":"图标","type":"string"},"parentId":{"description":"父级id","type":"string"},"type":{"description":"块类型","type":"integer"},"size":{"description":"文件大小","type":"integer"},"fileCount":{"description":"下级文件及文件夹数目","type":"integer"},"ossName":{"description":"ossName","type":"string"},"extName":{"description":"后缀","type":"string"},"navs":{"description":"路径","type":"array","items":{"type":"object","required":["uuid","title"],"properties":{"uuid":{"description":"块 uuid","type":"string"},"title":{"description":"标题","type":"string"}}}}}},"InvitationDTO":{"type":"object","description":"空间邀请信息","required":["uuid","spaceId","inviterId","status","createdAt","expirationAt"],"properties":{"uuid":{"description":"uuid","type":"string"},"spaceId":{"description":"空间id","type":"string"},"inviterId":{"description":"邀请者id","type":"string"},"status":{"description":"状态","type":"integer","enum":[1,-1]},"createdAt":{"description":"创建时间","type":"integer"},"expirationAt":{"description":"过期时间","type":"integer"}}},"FileDTO":{"type":"object","description":"文件信息","required":["uuid","name","updateTime","fileSize"],"properties":{"uuid":{"description":"uuid","type":"string"},"name":{"description":"文件名","type":"string"},"updateTime":{"description":"修改时间","type":"integer"},"fileSize":{"description":"文件大小","type":"integer"},"extName":{"description":"后缀","type":"string"},"ossName":{"description":"ossName","type":"string"},"navs":{"description":"目录导航","type":"array","items":{"type":"object","required":["uuid","title"],"properties":{"uuid":{"description":"块 uuid","type":"string"},"title":{"description":"标题","type":"string"}}}}}},"CollectionSchema":{"type":"object","description":"列定义","required":["name","type"],"properties":{"name":{"description":"列名","type":"string"},"type":{"$ref":"#/components/schemas/CollectionSchemaType"},"options":{"description":"选项列表","type":"array","items":{"type":"object","required":["id","value","color"],"properties":{"id":{"type":"string"},"value":{"type":"string"},"color":{"type":"string"}}}},"numberFormat":{"description":"数字格式","type":"string"},"dateFormat":{"$ref":"#/components/schemas/DateFormat"},"timeFormat":{"$ref":"#/components/schemas/TimeFormat"},"formula":{"description":"计算公式","type":"object","required":["text","refProps"],"properties":{"text":{"type":"string"},"refProps":{"type":"object","additionalProperties":{"type":"string"}}}},"collectionId":{"description":"关联多维表id(关联属性)","type":"string"},"spaceId":{"description":"关联多维表的 spaceId (关联属性)","type":"string"},"pairProperty":{"description":"关联多维表的 property (关联属性)","type":"string"},"relationProperty":{"description":"要引用的关联属性 (汇总属性)","type":"string"},"targetProperty":{"description":"要汇总的关联表属性 (汇总属性)","type":"string"},"targetPropertyType":{"$ref":"#/components/schemas/CollectionSchemaType"},"aggregation":{"$ref":"#/components/schemas/AggregationAction"}}},"CollectionViewDTO":{"description":"多维表视图","type":"object","required":["uuid","spaceId","parentId","type","title","format","version","pageSort","status","createdAt","updatedAt"],"properties":{"uuid":{"description":"块 uuid","type":"string","uniqueItems":true},"spaceId":{"description":"空间 uuid","type":"string"},"parentId":{"description":"父节点 uuid","type":"string"},"shareId":{"description":"分享 uuid","type":"string"},"createdBy":{"description":"创建人","type":"string"},"type":{"$ref":"#/components/schemas/CollectionViewType"},"title":{"description":"标题","type":"string"},"format":{"type":"object","properties":{"showTitle":{"description":"内嵌多维表是否显示标题","type":"boolean"},"tableProperties":{"$ref":"#/components/schemas/CollectionViewProperties"},"aggregations":{"type":"object","additionalProperties":{"type":"object","required":["action"],"properties":{"action":{"$ref":"#/components/schemas/AggregationAction"}}}},"filter":{"$ref":"#/components/schemas/CollectionFilterGroup"},"sorters":{"type":"array","items":{"$ref":"#/components/schemas/CollectionSorter"}},"filterBlockType":{"description":"筛选块类型,汇总页使用","type":"array","items":{"$ref":"#/components/schemas/BlockType"}},"tableWrap":{"type":"boolean","description":"表格是否换行,默认否"},"collectionGroupBy":{"allOf":[{"description":"视图通用分组配置，根据哪个属性分组"},{"$ref":"#/components/schemas/CollectionViewGroupBy"}]},"collectionGroups":{"allOf":[{"description":"视图通用分组显示配置"},{"$ref":"#/components/schemas/CollectionViewGroups"}]},"boardGroupBy":{"allOf":[{"description":"看板专用分组配置，根据哪个属性分组"},{"$ref":"#/components/schemas/CollectionViewGroupBy"}]},"boardGroups":{"allOf":[{"description":"看板专用分组显示配置"},{"$ref":"#/components/schemas/CollectionViewGroups"}]},"boardProperties":{"$ref":"#/components/schemas/CollectionViewProperties"},"boardCardSize":{"$ref":"#/components/schemas/CardSize"},"boardCoverType":{"$ref":"#/components/schemas/CoverType"},"boardShowPropertyName":{"type":"boolean","description":"是否显示属性名，默认显示"},"boardCoverProperty":{"description":"看板封面文件列 id","type":"string"},"galleryProperties":{"$ref":"#/components/schemas/CollectionViewProperties"},"galleryCoverType":{"$ref":"#/components/schemas/CoverType"},"galleryShowPropertyName":{"type":"boolean","description":"是否显示属性名，默认显示"},"galleryCardSize":{"$ref":"#/components/schemas/CardSize"},"galleryCoverProperty":{"description":"画廊封面文件列 id","type":"string"},"listProperties":{"$ref":"#/components/schemas/CollectionViewProperties"},"timelineProperties":{"$ref":"#/components/schemas/CollectionViewProperties"},"timelineTableProperties":{"$ref":"#/components/schemas/CollectionViewProperties"},"timelineBy":{"type":"string","description":"时间轴开始时间列id"},"timelineByEnd":{"type":"string","description":"时间轴结束时间列id"},"timelineShowTable":{"type":"boolean","description":"时间轴是否显示表格，默认显示"},"timelinePreference":{"$ref":"#/components/schemas/CollectionTimelinePreference"},"timelineColorSetting":{"type":"object","description":"时间轴单个卡片的背景颜色设置","properties":{"type":{"description":"颜色取值类型 [empty | custom | property]","type":"string"},"propertyId":{"description":"从单选取值时指定的单选属性 id","type":"string"}}},"calendarBy":{"type":"string","description":"日历视图开始时间列id"},"calendarByEnd":{"type":"string","description":"日历视图结束时间列id"},"calendarType":{"type":"string","description":"日历视图展示类型 (day｜month)，如果未设置，默认 month"},"calendarProperties":{"$ref":"#/components/schemas/CollectionViewProperties"},"calendarColorSetting":{"type":"object","description":"日历单个卡片的背景颜色设置","properties":{"type":{"description":"颜色取值类型 [empty | custom | property]","type":"string"},"propertyId":{"description":"从单选取值时指定的单选属性 id","type":"string"}}},"galleryCoverAspect":{"$ref":"#/components/schemas/CoverAspectType"},"boardCoverAspect":{"$ref":"#/components/schemas/CoverAspectType"},"formProperties":{"$ref":"#/components/schemas/CollectionViewFormProperties"},"formDescription":{"type":"array","description":"表单描述","items":{"$ref":"#/components/schemas/SegmentDTO"}},"formShowDescription":{"type":"boolean","description":"是否显示表单描述说明"},"formIllegal":{"type":"boolean","description":"表单视图分享后是否被风控"},"formShared":{"type":"boolean","description":"表单是否开启分享，默认否"},"formSharedExpiredTime":{"type":"integer","description":"表单分享过期时间"},"formSerialNumber":{"type":"boolean","description":"表单是否显示序号，默认开启"},"formOnlyOneSubmit":{"type":"boolean","description":"表单是否开启只能提交一次，默认否"},"formPermission":{"$ref":"#/components/schemas/FormPermission"},"formInviteUserPermissions":{"description":"表单邀请的用户权限, 同之前的权限字段","type":"array","items":{"$ref":"#/components/schemas/PermissionDTO"}}}},"version":{"description":"块版本","type":"integer"},"pageSort":{"description":"手动排序","type":"array","items":{"type":"string"}},"status":{"$ref":"#/components/schemas/BlockStatus"},"createdAt":{"type":"integer"},"updatedAt":{"type":"integer"}}},"CollectionFilterGroup":{"description":"块","type":"object","required":["filters","operator","type"],"properties":{"filters":{"type":"array","items":{"oneOf":[{"$ref":"#/components/schemas/CollectionFilter"},{"$ref":"#/components/schemas/CollectionFilterGroup"}]}},"operator":{"type":"string","enum":["and","or"]},"type":{"type":"string","enum":["group"]},"disable":{"description":"是否禁用","type":"boolean"}}},"CollectionFilter":{"description":"块","type":"object","required":["property","operator","value","type"],"properties":{"property":{"type":"string"},"propertyType":{"$ref":"#/components/schemas/CollectionSchemaType"},"operator":{"type":"string","enum":["eq","neq","gt","gte","lt","lte","in","nin","startsWith","endsWith","isEmpty","isNotEmpty"]},"mode":{"type":"string","enum":["any","every","none"]},"value":{"type":"string"},"type":{"type":"string","enum":["filter"]},"disable":{"description":"是否禁用","type":"boolean"}}},"CollectionSorter":{"description":"块","type":"object","required":["property","direction"],"properties":{"property":{"type":"string"},"direction":{"type":"string","enum":["asc","desc"]},"disable":{"description":"是否禁用","type":"boolean"}}},"CollectionViewGroupBy":{"type":"object","description":"根据哪个属性分组","properties":{"property":{"description":"属性id","type":"string"},"hideEmptyGroups":{"description":"是否隐藏空分组","type":"boolean"},"enableBoardColorColumns":{"description":"是否显示看板颜色列,默认值 true","type":"boolean"},"start":{"description":"数字开始","type":"number"},"end":{"description":"数字结束","type":"number"},"size":{"description":"数字大小","type":"number"},"sort":{"$ref":"#/components/schemas/GroupSortType"},"groupLevel":{"$ref":"#/components/schemas/GroupLevel"}}},"CollectionViewGroups":{"type":"array","description":"分组显示配置","items":{"type":"object","required":["property","visible","propertyType"],"properties":{"property":{"description":"属性id","type":"string"},"propertyType":{"$ref":"#/components/schemas/CollectionSchemaType"},"resultType":{"description":"公式计算后的输出结果类型：number | text | checkbox | date","type":"string"},"value":{"description":"分组属性值","type":"string"},"visible":{"description":"是否实现，默认显示","type":"boolean"},"emptyHidden":{"description":"隐藏空分组打开时，如果当前分组记录数为空，是否隐藏当前分组。false：不受 hideEmptyGroups 影响，true 或未设置则受 hideEmptyGroups 控制","type":"boolean"}}}},"IconData":{"description":"图标","type":"object","properties":{"type":{"description":"图标类型","type":"string","enum":["emoji","upload","http"]},"value":{"description":"图标值","type":"string"}}},"Point":{"description":"坐标","type":"object","properties":{"x":{"type":"number"},"y":{"type":"number"}}},"OccupationDTO":{"description":"职业信息","type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"}}},"SelectOptionDTO":{"type":"object","required":["id","name"],"properties":{"id":{"type":"string"},"name":{"type":"string"}}},"NotificationDTO":{"type":"object","properties":{"uuid":{"type":"string"},"spaceId":{"type":"string"},"userId":{"type":"string","description":"用户id"},"parentId":{"type":"string","description":"父级id"},"parentTable":{"type":"string","description":"父级表"},"channel":{"type":"string","enum":["mentions"]},"type":{"type":"string","enum":["userMentioned","userInvited","groupInvited","reminder","commented"]},"navigableBlockId":{"type":"string","description":"可跳转的页面id"},"read":{"type":"boolean","description":"是否已读"},"archived":{"type":"boolean","description":"是否已归档"},"version":{"type":"integer"},"createdAt":{"type":"integer"},"updatedAt":{"type":"integer"},"edits":{"type":"array","items":{"type":"object","properties":{"authorId":{"type":"string","description":"作者id，这里是邀请人"},"invitedUserId":{"type":"string","description":"被邀请人id"},"invitedPermissionGroupId":{"type":"string","description":"被邀请权限组id"},"mentionedBlockId":{"type":"string","description":"被提及的页面id"},"mentionedProperty":{"type":"string","description":"被提及的属性"},"mentionedUserId":{"type":"string","description":"被提及的用户id"},"reminderBlockId":{"type":"string","description":"被提醒的块id"},"reminderProperty":{"type":"string","description":"被提醒的属性"},"type":{"type":"string","enum":["userMentioned","userInvited","groupInvited","reminder"]}}}},"invitedUserId":{"type":"string","description":"被邀请人id"},"invitedPermissionGroupId":{"type":"string","description":"被邀请权限组id"},"mentionedBlockId":{"type":"string","description":"被提及的页面id"},"mentionedProperty":{"type":"string","description":"被提及的属性"},"mentionedUserId":{"type":"string","description":"被提及的用户id"},"activityId":{"type":"string","description":"关联动态id"}}},"PageActivityDTO":{"type":"object","required":["uuid","spaceId","parentId","type","version","startTime","endTime","createdAt","updatedAt","edits"],"properties":{"uuid":{"type":"string"},"spaceId":{"type":"string"},"parentId":{"type":"string"},"type":{"type":"string","enum":["blockEdited","pageCreated","pageDeleted","pageRestored","pageLocked","pageUnlocked","permissionsEdited","permissionRestrictionCreated","permissionRestrictionDeleted","collectionPropertyEdited","collectionViewEdited","commented"]},"version":{"type":"integer"},"startTime":{"type":"integer"},"endTime":{"type":"integer"},"createdAt":{"type":"integer"},"updatedAt":{"type":"integer"},"edits":{"type":"array","items":{"$ref":"#/components/schemas/PageActivityEditDTO"}},"collectionId":{"description":"所在的多维表页面，多维表页面内的改动都会带有此值。","type":"string"},"collectionPropertyId":{"description":"多维表改动的属性id","type":"string"},"collectionViewId":{"description":"多维表改动的视图id","type":"string"},"discussionId":{"description":"评论组id","type":"string"}}},"PageActivityEditDTO":{"type":"object","required":["authors","type","spaceId","timestamp","navigableBlockId"],"properties":{"type":{"type":"string","enum":["blockCreated","blockChanged","blockDeleted","pageCreated","pageDeleted","pageRestored","pageLocked","pageUnlocked","permissionCreated","permissionChanged","permissionDeleted","permissionRestrictionCreated","permissionRestrictionDeleted","collectionPropertyCreated","collectionPropertyChanged","collectionPropertyDeleted","collectionViewCreated","collectionViewChanged","collectionViewDeleted","commentCreated","commentChanged","commentDeleted"]},"authors":{"type":"array","items":{"type":"string"}},"spaceId":{"type":"string"},"timestamp":{"description":"操作时间戳","type":"integer"},"navigableBlockId":{"description":"相关联的 blockid，如果被修改的是 block，则是 blockid，如果是视图，则是视图对应的多维表的 blockid","type":"string"},"blockId":{"description":"被修改的 blockid","type":"string"},"blockData":{"type":"object","properties":{"current":{"$ref":"#/components/schemas/PageActivityBlockData"},"before":{"$ref":"#/components/schemas/PageActivityBlockData"},"after":{"$ref":"#/components/schemas/PageActivityBlockData"}}},"blockSchema":{"description":"当时的多维表列定义","type":"object","additionalProperties":{"$ref":"#/components/schemas/CollectionSchema"}},"permissionData":{"type":"object","properties":{"current":{"$ref":"#/components/schemas/PermissionDTO"},"before":{"$ref":"#/components/schemas/PermissionDTO"},"after":{"$ref":"#/components/schemas/PermissionDTO"},"actualChanges":{"type":"array","items":{"$ref":"#/components/schemas/PermissionDTO"}},"calculatedChanges":{"type":"array","items":{"type":"object","properties":{"before":{"$ref":"#/components/schemas/PermissionDTO"},"after":{"$ref":"#/components/schemas/PermissionDTO"}}}}}},"collectionId":{"type":"string"},"collectionPropertyId":{"type":"string"},"collectionPropertyData":{"$ref":"#/components/schemas/CollectionSchema"},"collectionViewId":{"type":"string"},"collectionViewData":{"type":"object","properties":{"current":{"$ref":"#/components/schemas/CollectionViewDTO"},"before":{"$ref":"#/components/schemas/CollectionViewDTO"},"after":{"$ref":"#/components/schemas/CollectionViewDTO"}}},"commentData":{"type":"object","properties":{"current":{"$ref":"#/components/schemas/CommentDTO"},"before":{"$ref":"#/components/schemas/CommentDTO"},"after":{"$ref":"#/components/schemas/CommentDTO"}}},"commentId":{"type":"string"},"discussionId":{"type":"string"}}},"PageActivityBlockData":{"type":"object","properties":{"blockValue":{"$ref":"#/components/schemas/BlockDTO"}}},"DiscussionDTO":{"type":"object","description":"评论组","required":["uuid","spaceId","parentId","version","status","createdAt","createdBy","updatedAt","updatedBy","resolved","comments","context"],"properties":{"uuid":{"description":"块 uuid","type":"string","uniqueItems":true},"spaceId":{"description":"空间 uuid","type":"string"},"parentId":{"description":"父节点 uuid","type":"string"},"version":{"description":"块版本","type":"integer"},"status":{"$ref":"#/components/schemas/BlockStatus"},"createdAt":{"type":"integer"},"createdBy":{"description":"创建人","type":"string"},"updatedAt":{"type":"integer"},"updatedBy":{"description":"修改人","type":"string"},"resolved":{"description":"已解决","type":"boolean"},"comments":{"description":"评论id列表","type":"array","items":{"type":"string"}},"context":{"description":"划选评论的富文本","type":"array","items":{"$ref":"#/components/schemas/SegmentDTO"}}}},"CommentDTO":{"type":"object","description":"评论","required":["uuid","spaceId","parentId","version","status","createdAt","createdBy","updatedAt","updatedBy","text","subNodes"],"properties":{"uuid":{"description":"块 uuid","type":"string","uniqueItems":true},"spaceId":{"description":"空间 uuid","type":"string"},"parentId":{"description":"父节点 uuid","type":"string"},"version":{"description":"块版本","type":"integer"},"status":{"$ref":"#/components/schemas/BlockStatus"},"createdAt":{"type":"integer"},"createdBy":{"description":"创建人","type":"string"},"updatedAt":{"type":"integer"},"updatedBy":{"description":"修改人","type":"string"},"text":{"description":"评论内容","type":"array","items":{"$ref":"#/components/schemas/SegmentDTO"}},"subNodes":{"description":"评论id列表","type":"array","items":{"type":"string"}}}}},"parameters":{"phone":{"in":"path","name":"phone","description":"联系电话","required":true,"schema":{"type":"string","example":"15043339444"}},"user":{"in":"path","name":"user","description":"用户 uuid","required":true,"schema":{"type":"string","example":"xxxx-xxxx-xxxx"}},"space":{"in":"path","name":"space","description":"空间 uuid","required":true,"schema":{"type":"string","example":"xxxx-xxxx-xxxx"}},"archive":{"in":"path","name":"archive","description":"归档 uuid","required":true,"schema":{"type":"string","example":"xxxx-xxxx-xxxx"}},"file":{"in":"path","name":"file","description":"文件 uuid","required":true,"schema":{"type":"string","example":"xxxx-xxxx-xxxx"}},"blob":{"in":"path","name":"blob","description":"下载 uuid","required":true,"schema":{"type":"string","example":"xxxx-xxxx-xxxx"}},"folder":{"in":"path","name":"folder","description":"文件夹 uuid","required":true,"schema":{"type":"string","example":"xxxx-xxxx-xxxx"}},"doc":{"in":"path","name":"doc","description":"文档 uuid","required":true,"schema":{"type":"string","example":"xxxx-xxxx-xxxx"}},"history":{"in":"path","name":"history","description":"历史 uuid","required":true,"schema":{"type":"string","example":"xxxx-xxxx-xxxx"}},"block":{"in":"path","name":"block","description":"文档块(或表单视图) uuid","required":true,"schema":{"type":"string","example":"xxxx-xxxx-xxxx"}},"share":{"in":"path","name":"share","description":"视图分享 uuid","required":true,"schema":{"type":"string","example":"xxxx-xxxx-xxxx"}},"table":{"in":"path","name":"table","description":"表格 uuid","required":true,"schema":{"type":"string","example":"xxxx-xxxx-xxxx"}},"view":{"in":"path","name":"view","description":"表格视图 uuid","required":true,"schema":{"type":"string","example":"xxxx-xxxx-xxxx"}},"column":{"in":"path","name":"column","description":"表格列 uuid","required":true,"schema":{"type":"string","example":"xxxx-xxxx-xxxx"}},"record":{"in":"path","name":"record","description":"表格行 uuid","required":true,"schema":{"type":"string","example":"xxxx-xxxx-xxxx"}},"page":{"in":"query","name":"page","description":"页码，从 1 开始","required":true,"schema":{"type":"integer","example":1}},"perPage":{"in":"query","name":"perPage","description":"一页记录数","required":true,"schema":{"type":"integer","example":10}},"search":{"in":"query","name":"search","description":"搜索关键字","schema":{"type":"string","example":"XXX"}},"fileType":{"in":"query","name":"fileType","description":"文件类型（image、video、audio）","schema":{"type":"string","example":"image"}}},"examples":{"200|true":{"value":{"code":200,"data":true}},"200|userInfo":{"value":{"code":200,"data":{"uuid":"xxxx-xxxx-xxxx","phone":"17600111100","nickname":"XXX"}}},"200|pageList":{"value":{"code":200,"data":[{"uuid":"块 uuid","title":"标题","icon":"图标","navs":[{"uuid":"xxxx-xxxx-xxxx","title":"XXXX"}]}]}},"200|uuid":{"value":{"code":200,"data":"xxxx-xxxx-xxxx"}},"200|spaceInfo":{"value":{"code":200,"data":{"uuid":"xxxx-xxxx-xxxx","title":"空间名称","icon":"图标"}}},"UNAUTHORIZED":{"value":{"code":1403,"msg":"请求未授权"}},"SHARE_NO_PASSWORD":{"value":{"code":1405,"msg":"未输入密码"}},"SHARE_WRONG_PASSWORD":{"value":{"code":1406,"msg":"密码输入错误"}},"NO_RIGHT":{"value":{"code":1001,"msg":"无访问权限"}},"WRONG_PHONE":{"value":{"code":1002,"msg":"电话不可用"}},"BLACK_LIST":{"value":{"code":1003,"msg":"系统黑名单"}},"MSG_FREQUENT":{"value":{"code":1004,"msg":"发送过于频繁"}},"WRONG_CODE":{"value":{"code":1005,"msg":"验证码错误"}},"WRONG_INVITE":{"value":{"code":1006,"msg":"邀请码无效"}},"PSW_DIFF":{"value":{"code":1007,"msg":"新旧密码不一致"}},"COMPLAIN_FAIL":{"value":{"code":1110,"msg":"举报已受理"}},"APPEAL_FAIL":{"value":{"code":1111,"msg":"申诉已受理"}},"WRONG_PASSWORD":{"value":{"code":1112,"msg":"密码错误"}},"PARAMETER_INVALID":{"value":{"code":1900,"msg":"参数无效"}},"HAS_SINGUP":{"value":{"code":1009,"msg":"已经注册"}},"APPLE_AUTH_FAIL":{"value":{"code":1103,"msg":"苹果授权失败"}},"WECHAT_AUTH_FAIL":{"value":{"code":1104,"msg":"微信授权失败"}},"QQ_AUTH_FAIL":{"value":{"code":1105,"msg":"QQ授权失败"}},"SPACE_CREATE_FAIL":{"value":{"code":1200,"msg":"空间创建失败"}},"SPACE_GET_FAIL":{"value":{"code":1201,"msg":"空间获取失败"}},"SPACE_UPDATE_FAIL":{"value":{"code":1202,"msg":"空间更新失败"}},"SPACE_DELETE_FAIL":{"value":{"code":1203,"msg":"空间删除失败"}},"SPACE_NO_RIGHT":{"value":{"code":1204,"msg":"没有操作空间的权限"}},"SPACE_NONE":{"value":{"code":1205,"msg":"空间不存在"}},"DOMAIN_IS_OCCUPIED":{"value":{"code":1213,"msg":"自定义域名已被占用"}},"NO_DOC":{"value":{"code":3005,"msg":"文档不存在"}},"NO_BLOCK":{"value":{"code":3207,"msg":"未找到块"}},"ILLEGAL_CONTENT":{"value":{"code":1600,"msg":"违规内容无法访问"}},"NO_VIEW":{"value":{"code":3220,"msg":"未找到视图"}},"NOT_SHARED":{"value":{"code":5001,"msg":"视图未分享"}},"SHARE_EXPIRED":{"value":{"code":5001,"msg":"视图分享已过期"}},"NO_LOGIN":{"value":{"code":1102,"msg":"未登录"}},"ONLY_ONE_SUBMIT":{"value":{"code":5003,"msg":"用户重复提交"}},"GET_FAIL":{"value":{"code":1201,"msg":"空间获取失败"}},"FORBIDDEN":{"value":{"code":1403,"msg":"无访问权限"}},"INVITE_EXPIRED":{"value":{"code":1207,"msg":"邀请码已失效"}},"SPACE_MEMBER_FULL":{"value":{"code":1208,"msg":"空间成员已满"}},"LOGIN_FAIL":{"value":{"code":1008,"msg":"登录失败"}},"THIRD_PARTY_LOGIN_TOKEN_FAIL":{"value":{"code":1800,"msg":"第三方登录 token 无效"}}},"securitySchemes":{"BearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}},"security":[{"BearerAuth":[]}],"tags":[{"name":"infra","description":"基础设施 (phone, user, space, archive)"},{"name":"editor","description":"协同文档 (doc, block)"}]}